---
title: Closed Subschemes
---

# Exercise 1.6

We say that a topological space $X$ is **quasi-compact** if from any open covering $\{U_i\}_i$ of $X$, we can extract a finite subcovering.

(a) Show that any closed subspace of a quasi-compact space is quasi-compact.

(b) Show that $\operatorname{Spec} A$ is quasi-compact for any ring $A$.

**Solution.**

**(a) Closed subspaces of quasi-compact spaces are quasi-compact.**

Let $X$ be a quasi-compact space and let $Z \subseteq X$ be a closed subspace. Let $\{V_i\}_i$ be an open covering of $Z$. Since $Z$ has the subspace topology, each $V_i$ can be written as $V_i = U_i \cap Z$ for some open $U_i \subseteq X$.

Since $Z$ is closed, $X \setminus Z$ is open. Consider the open covering of $X$ given by:
$$
\{U_i\}_i \cup \{X \setminus Z\}.
$$

Since $X$ is quasi-compact, we can extract a finite subcovering. There are two cases:

1. **If $X \setminus Z$ is not used** in the finite subcovering, then we have $\{U_{i_1}, \ldots, U_{i_n}\}$ covering $X$. Since $Z \subseteq X$, these sets also cover $Z$, and thus $\{V_{i_1}, \ldots, V_{i_n}\}$ where $V_{i_k} = U_{i_k} \cap Z$ cover $Z$.

2. **If $X \setminus Z$ is used** in the finite subcovering, say $\{U_{i_1}, \ldots, U_{i_n}, X \setminus Z\}$, then removing $X \setminus Z$ still covers $Z$ (since $X \setminus Z$ doesn't intersect $Z$). Thus $\{V_{i_1}, \ldots, V_{i_n}\}$ covers $Z$.

In either case, we've extracted a finite subcovering of $\{V_i\}_i$ from the original covering of $Z$. Hence $Z$ is quasi-compact.

**(b) $\operatorname{Spec} A$ is quasi-compact.**

Recall that the **standard open subsets** (also called **principal open subsets**) of $\operatorname{Spec} A$ are sets of the form:
$$
D(f) = \{\mathfrak{p} \in \operatorname{Spec} A \mid f \notin \mathfrak{p}\}
$$
for $f \in A$. These form a basis for the Zariski topology on $\operatorname{Spec} A$.

Let $\{U_i\}_i$ be an open covering of $\operatorname{Spec} A$. Each $U_i$ can be written as a union of standard opens. By refining the covering if necessary, we may assume that each $U_i$ is itself a standard open $D(f_i)$ for some $f_i \in A$.

Thus we have a covering:
$$
\operatorname{Spec} A = \bigcup_{i \in I} D(f_i).
$$

We claim that this implies the ideal generated by $\{f_i\}_{i \in I}$ is the whole ring $A$. Suppose not. Then the ideal $(\{f_i\}_{i \in I})$ is contained in some maximal ideal $\mathfrak{m} \subset A$. This means $f_i \in \mathfrak{m}$ for all $i \in I$, so $\mathfrak{m} \notin D(f_i)$ for any $i$. But then $\mathfrak{m} \notin \bigcup_i D(f_i)$, contradicting that the $D(f_i)$ cover $\operatorname{Spec} A$.

Therefore, $(\{f_i\}_{i \in I}) = A$, and there exists a finite subset $\{f_{i_1}, \ldots, f_{i_n}\}$ such that:
$$
(f_{i_1}, \ldots, f_{i_n}) = A.
$$

This is because $1$ can be expressed as a finite linear combination of the $f_i$:
$$
1 = \sum_{k=1}^n a_k f_{i_k}
$$
for some $a_k \in A$ and finitely many $f_{i_k}$.

**Key observation:** If $(f_1, \ldots, f_n) = A$, then $D(f_1) \cup \cdots \cup D(f_n) = \operatorname{Spec} A$.

**Proof.** For any prime ideal $\mathfrak{p} \in \operatorname{Spec} A$, if $\mathfrak{p}$ were not in any $D(f_k)$, then $f_k \in \mathfrak{p}$ for all $k = 1, \ldots, n$. But then:
$$
1 = \sum_{k=1}^n a_k f_k \in \mathfrak{p},
$$
which is impossible since $\mathfrak{p} \neq A$.

Therefore $\{D(f_{i_1}), \ldots, D(f_{i_n})\}$ is a finite subcovering of $\{D(f_i)\}_{i \in I}$, and $\operatorname{Spec} A$ is quasi-compact.

**Intuition.** The proof uses a crucial algebraic fact: if an ideal equals the whole ring, then $1$ can be written as a *finite* linear combination of generators. This finiteness property of rings is what guarantees the quasi-compactness of $\operatorname{Spec} A$.

# Lemma 2.9

Let $F$ be a sheaf on $X$. Let $s, t \in F(X)$ be sections such that
$s_x = t_x$ for every $x \in X$. Then $s = t$.

**Proof.** We may assume that $t = 0$. For every $x \in X$, there exists an open
neighborhood $U_x$ of $x$ such that $s|_{U_x} = 0$, because $s_x = 0$. As the $U_x$ cover $X$
when $x$ varies, we indeed have $s = 0$.

# Proposition 2.12

Let $\alpha : F \to G$ be a morphism of sheaves on $X$. Then $\alpha$ is
an isomorphism if and only if $\alpha_x$ is an isomorphism for every $x \in X$.

**Proof.** Suppose that $\alpha_x$ is an isomorphism for every $x \in X$. Let us show that
$\alpha$ is an isomorphism (the converse is trivial). Let $s \in F(U)$ be a section. If
$\alpha(U)(s) = 0$, then for every $x \in U$, we have $\alpha_x(s_x) = (\alpha(U)(s))_x = 0$. It follows
that $s_x = 0$ for every $x \in U$. Hence $s = 0$ (Lemma 2.9) and $\alpha$ is injective. Next,
let $t \in G(U)$. Then we can find a covering of $U$ by open sets $U_i$ and sections
$s_i \in F(U_i)$ such that $\alpha(U_i)(s_i) = t|_{U_i}$. As we have just seen that $\alpha$ is injective,
$s_i$ and $s_j$ coincide on $U_i \cap U_j$. The $s_i$ therefore glue to a section $s \in F(U)$ (i.e.,
$s|_{U_i} = s_i$). By construction, $\alpha(U)(s)$ and $t$ coincide on every $U_i$, and are therefore
equal. This proves that $\alpha(U)$ is surjective.

# Proposition 2.18

A sequence of sheaves $F \to G \to H$ is exact if and only if
$$
F_x \to G_x \to H_x
$$
is an exact sequence of groups for every $x \in X$.

# Topological Immersions

Before defining closed immersions of ringed spaces, we recall the purely topological notions.

A **topological open immersion** is a continuous map $f : X \to Y$ such that $f$ is a homeomorphism of $X$ onto an open subset $f(X) \subseteq Y$. Equivalently, $f$ identifies $X$ with an open subset of $Y$.

A **topological closed immersion** is a continuous map $f : X \to Y$ such that $f$ is a homeomorphism of $X$ onto a closed subset $f(X) \subseteq Y$. Equivalently, $f$ identifies $X$ with a closed subset of $Y$.

**Examples.**
- The inclusion $\{0\} \hookrightarrow \mathbb{R}$ is a closed immersion (a point is closed in $\mathbb{R}$).
- The inclusion $(0,1) \hookrightarrow \mathbb{R}$ is an open immersion but not a closed immersion.
- The inclusion $[0,1] \hookrightarrow \mathbb{R}$ is neither open nor closed as a map of topological spaces (the image is not open, and while $[0,1]$ is closed, the map is not a homeomorphism onto its image with the subspace topology).

# Definition 2.22

We say that a morphism $(f, f^\#) : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ is an
open immersion (resp. closed immersion) if $f$ is a topological open immersion
(resp. closed immersion) and if $f^\#_x$ is an isomorphism (resp. if $f^\#_x$ is surjective)
for every $x \in X$.

**Remark.** The different conditions on $f^\#_x$ reflect the algebraic nature of these constructions.

- For an **open immersion**, $X$ is identified with an open subset $V \subseteq Y$. The sheaf $\mathcal{O}_X$ is literally the restriction of $\mathcal{O}_Y$ to $V$. At the level of stalks, functions on $Y$ near $x \in V$ are the same as functions on $X$ near $x$—we're just looking at the same data. Hence $f^\#_x$ must be an isomorphism. This is analogous to **localization** in algebra: if $S^{-1}A$ is a localization of $A$, the natural map $A \to S^{-1}A$ becomes an isomorphism after localizing.

- For a **closed immersion**, $X$ is identified with a closed subset $Z \subseteq Y$. The sheaf $\mathcal{O}_X$ is a "quotient" of $\mathcal{O}_Y$ by functions that vanish on $Z$. At the level of stalks, we have a surjection $\mathcal{O}_{Y,f(x)} \to \mathcal{O}_{X,x}$ whose kernel consists of germs of functions vanishing at $x$. This is not injective unless the closed subset is the whole space. This is analogous to **quotient by an ideal** in algebra: the map $A \to A/J$ is surjective but not injective (unless $J = 0$).

In summary:
$$
\text{open immersion} \longleftrightarrow \text{localization} \quad (\text{injective})$$
$$
\text{closed immersion} \longleftrightarrow \text{quotient} \quad (\text{surjective})$$

Let $V$ be an open subset of $Y$. Then $(V, \mathcal{O}_Y|_V)$ is clearly a ringed topological
space. In all that follows, an open subset $V$ will always be endowed with this
structure induced by $\mathcal{O}_Y$. It is clear that $(f, f^\#)$ is an open immersion if and only
if there exists an open subset $V$ of $Y$ such that $(f, f^\#)$ induces an isomorphism
from $(X, \mathcal{O}_X)$ onto $(V, \mathcal{O}_Y|_V)$ (see Proposition 2.12).

Indeed, the topological condition implies $f(X) = V$ is open, and the condition that $f^\#_x$ is an isomorphism for every $x \in X$ means precisely that the induced morphism $(f, f^\#) : (X, \mathcal{O}_X) \to (V, \mathcal{O}_Y|_V)$ is an isomorphism of ringed spaces by Proposition 2.12.

In what follows, we will give a characterization of the closed immersions. Let
$(X, \mathcal{O}_X)$ be a ringed topological space. Let $\mathcal{J}$ be a sheaf of ideals of $\mathcal{O}_X$ (i.e.,
$\mathcal{J}(U)$ is an ideal of $\mathcal{O}_X(U)$ for every open subset $U$). Let
$$
V(\mathcal{J}) := \{x \in X \mid \mathcal{J}_x \neq \mathcal{O}_{X,x}\}.
$$

**Notation.** The notation $V(\mathcal{J})$ generalizes the classical algebraic geometry notion of the "variety" or "zero set" of an ideal. In classical algebraic geometry, for an ideal $I \subseteq k[x_1, \ldots, x_n]$, one defines
$$
V(I) = \{x \in \mathbb{A}^n \mid f(x) = 0 \text{ for all } f \in I\}.
$$
Equivalently, $V(I)$ consists of points where the localization $I_x$ is not equal to the whole ring $\mathcal{O}_{\mathbb{A}^n,x}$.

In the sheaf-theoretic setting, a point $x \in V(\mathcal{J})$ precisely when $\mathcal{J}_x \subsetneq \mathcal{O}_{X,x}$—that is, when the stalk of $\mathcal{J}$ at $x$ is a *proper* ideal. This means there exist functions in $\mathcal{J}$ that "vanish" at $x$ (more precisely, the germ of some section of $\mathcal{J}$ at $x$ is not invertible).

Thus $V(\mathcal{J})$ is the set of points "where $\mathcal{J}$ defines a proper equation"—the closed subset cut out by the vanishing of functions in $\mathcal{J}$.

# Lemma 2.23

Let $X$ be a ringed topological space. Let $\mathcal{J}$ be a sheaf of ideals
of $\mathcal{O}_X$. Let $j : V(\mathcal{J}) \to X$ denote the inclusion. Then $V(\mathcal{J})$ is a closed subset
of $X$, $(V(\mathcal{J}), j^{-1}(\mathcal{O}_X/\mathcal{J}))$ is a ringed topological space, and we have a closed
immersion $(j, j^\#)$ of this space into $(X, \mathcal{O}_X)$, where $j^\#$ is the canonical surjection
$\mathcal{O}_X \to \mathcal{O}_X/\mathcal{J} = j_*(j^{-1}(\mathcal{O}_X/\mathcal{J}))$.

**Proof.** If $x \in X \setminus V(\mathcal{J})$, there exist an open neighborhood $U \ni x$ and $f \in \mathcal{J}(U)$
such that $f_x = 1$. It follows that $f|_V = 1$ in an open neighborhood $V \subseteq U$ of $x$.
We then have $V \subseteq X \setminus V(\mathcal{J})$. The latter is therefore open.
For every $x \in V(\mathcal{J})$, $(j^{-1}(\mathcal{O}_X/\mathcal{J}))_x = (\mathcal{O}_X/\mathcal{J})_x = \mathcal{O}_{X,x}/\mathcal{J}_x$ is a local ring.
The rest follows immediately.

In the rest of this book, given a sheaf of ideals $\mathcal{J}$, we will always endow $V(\mathcal{J})$
with the structure described in this lemma.

# Proposition 2.24

Let $f : Y \to X$ be a closed immersion of ringed topological
spaces. Let $Z$ be the ringed topological space $V(\mathcal{J})$ where $\mathcal{J} = \operatorname{Ker} f^\# \subseteq \mathcal{O}_X$.
Then $f$ factors into an isomorphism $Y \simeq Z$ followed by the canonical closed
immersion $Z \to X$.

**Proof.** As $f(Y)$ is closed in $X$, we have
$$
(f_*\mathcal{O}_Y)_x =
\begin{cases}
0 & \text{if } x \notin f(Y) \\
\mathcal{O}_{Y,y} & \text{if } x = f(y).
\end{cases}
$$
Using the exact sequence $0 \to \mathcal{J} \to \mathcal{O}_X \to f_*\mathcal{O}_Y \to 0$ and Proposition 2.18, we obtain exactness on stalks:
$$
0 \to \mathcal{J}_x \to \mathcal{O}_{X,x} \to (f_*\mathcal{O}_Y)_x \to 0.
$$

- If $x \notin f(Y)$, then $(f_*\mathcal{O}_Y)_x = 0$. The map $\mathcal{O}_{X,x} \to 0$ is the zero map, so by exactness at $\mathcal{J}_x$, the map $\mathcal{J}_x \to \mathcal{O}_{X,x}$ is an isomorphism. Hence $\mathcal{J}_x = \mathcal{O}_{X,x}$.
- If $x \in f(Y)$, then $(f_*\mathcal{O}_Y)_x = \mathcal{O}_{Y,y} \neq 0$. The map $\mathcal{O}_{X,x} \to \mathcal{O}_{Y,y}$ is surjective (since $f$ is a closed immersion), so its kernel $\mathcal{J}_x$ is a proper ideal of $\mathcal{O}_{X,x}$. Hence $\mathcal{J}_x \neq \mathcal{O}_{X,x}$.

Therefore $\mathcal{J}_x = \mathcal{O}_{X,x}$ if and only if $x \notin f(Y)$, which means $x \in V(\mathcal{J})$ if and only if $x \in f(Y)$. Hence $V(\mathcal{J}) = f(Y)$.

Now we construct the isomorphism $Y \simeq Z$. Let $j : Z \to X$ be the canonical injection. Since $Z = V(\mathcal{J}) = f(Y)$ as sets, we can define $g : Y \to Z$ to be the homeomorphism induced by $f$—that is, $g$ is the bijection $f(Y) \to V(\mathcal{J})$ given by the identity map on underlying points. Then $f = j \circ g$ as continuous maps of topological spaces.

**Step 1: Relating the sheaves.** By construction of $Z = V(\mathcal{J})$, the space $Z$ is endowed with the structure $(V(\mathcal{J}), j^{-1}(\mathcal{O}_X/\mathcal{J}))$ as defined in Lemma 2.23. In other words, $\mathcal{O}_Z = j^{-1}(\mathcal{O}_X/\mathcal{J})$. Thus:
$$
j_*\mathcal{O}_Z = j_*j^{-1}(\mathcal{O}_X/\mathcal{J}).
$$

But $\mathcal{O}_X/\mathcal{J} \simeq f_*\mathcal{O}_Y$ (this is exactly what the exact sequence $0 \to \mathcal{J} \to \mathcal{O}_X \to f_*\mathcal{O}_Y \to 0$ tells us). Therefore:
$$
j_*\mathcal{O}_Z \simeq j_*j^{-1}(f_*\mathcal{O}_Y).
$$

**Step 2: Applying Exercise 2.6.** We have $f = j \circ g$, so by Exercise 2.6(b):
$$
f_*\mathcal{O}_Y = (j \circ g)_*\mathcal{O}_Y = j_*(g_*\mathcal{O}_Y).
$$

Substituting this into our expression:
$$
j_*\mathcal{O}_Z \simeq j_*j^{-1}j_*(g_*\mathcal{O}_Y).
$$

**Step 3: Applying Exercise 2.13.** Since $j$ is a closed immersion, Exercise 2.13(a) tells us that the canonical morphism $G \to j_*j^{-1}G$ is surjective for any sheaf $G$. More importantly, Exercise 2.13(b) gives us an adjunction. But here we need something more specific: for an open immersion, $j^{-1}j_*F \to F$ is an isomorphism (Exercise 2.13(a)). However, $j$ is a **closed** immersion, not open.

Instead, we use the fact that the unit $G \to j_*j^{-1}G$ is the counit of the adjunction applied to $j^{-1}G$. Since $j$ is the inclusion of a closed subset, we can check this equality on stalks. For $x \in Z$:
$$
(j_*j^{-1}j_*(g_*\mathcal{O}_Y))_x = (j^{-1}j_*(g_*\mathcal{O}_Y))_x = (j_*(g_*\mathcal{O}_Y))_x = (g_*\mathcal{O}_Y)_x,
$$
where we used that $j^{-1}$ doesn't change stalks for points in the image of $j$.

**Step 4: The key isomorphism.** From the adjunction of Exercise 2.13(b), we have a canonical isomorphism:
$$
\mathcal{O}_Z = j^{-1}j_*\mathcal{O}_Z \simeq j^{-1}j_*(g_*\mathcal{O}_Y).
$$

But now $j^{-1}j_*(g_*\mathcal{O}_Y) \simeq g_*\mathcal{O}_Y$ because $g_*\mathcal{O}_Y$ is already a sheaf on $Z$ (by definition of the pushforward), and $j^{-1}j_*$ acts as the identity on sheaves supported on $Z$. More formally, the counit map $j^{-1}j^*F \to F$ is an isomorphism when $j$ is a topological embedding (which it is, as a closed immersion).

Therefore:
$$
\mathcal{O}_Z \simeq g_*\mathcal{O}_Y.
$$

**Conclusion.** The map $g : Y \to Z$ is a homeomorphism by construction, and we've shown $\mathcal{O}_Z \simeq g_*\mathcal{O}_Y$. This means $g$ induces an isomorphism of ringed topological spaces $Y \simeq Z$.

Finally, we verify that $f = j \circ g$ as morphisms of ringed topological spaces. We already know this holds on the topological level. On the sheaf level, the map $f^\# : \mathcal{O}_X \to f_*\mathcal{O}_Y$ factors through $j^\# : \mathcal{O}_X \to \mathcal{O}_X/\mathcal{J} \simeq j_*\mathcal{O}_Z$ followed by the isomorphism $j_*\mathcal{O}_Z \simeq j_*g_*\mathcal{O}_Y = f_*\mathcal{O}_Y$, which is exactly $(j \circ g)^\#$.

# Exercise 2.6

Let $f : X \to Y$, $g : Y \to Z$ be continuous maps, $F$ a sheaf on $X$, and $H$
a sheaf on $Z$. Show that
$$
f^{-1}(g^{-1}H) = (g \circ f)^{-1}H,
$$
$$
g_*(f_*F) = (g \circ f)_*F.
$$

**Solution.**

**(a) The identity $f^{-1}(g^{-1}H) = (g \circ f)^{-1}H$.**

Recall that for any sheaf $\mathcal{F}$ on a space $Z$ and continuous map $\phi : W \to Z$, the inverse image sheaf $\phi^{-1}\mathcal{F}$ is defined as the sheaf associated to the presheaf
$$
U \mapsto \varinjlim_{V \supseteq \phi(U)} \mathcal{F}(V).
$$

For an open set $U \subseteq X$, we compute:
$$
\begin{aligned}
(f^{-1}(g^{-1}H))(U) &= \varinjlim_{V \supseteq f(U)} (g^{-1}H)(V) \\
&= \varinjlim_{V \supseteq f(U)} \left( \varinjlim_{W \supseteq g(V)} H(W) \right).
\end{aligned}
$$

On the other hand:
$$
((g \circ f)^{-1}H)(U) = \varinjlim_{W \supseteq (g \circ f)(U)} H(W).
$$

The key observation is that direct limits over directed sets satisfy:
$$
\varinjlim_{V \supseteq f(U)} \varinjlim_{W \supseteq g(V)} H(W) = \varinjlim_{W \supseteq g(f(U))} H(W),
$$
because every $V$ containing $f(U)$ and $W$ containing $g(V)$ also satisfies $W \supseteq g(f(U))$, and conversely any $W$ containing $g(f(U))$ can be refined by some $g(V)$ with $V \supseteq f(U)$.

**Intuition:** The operations $g^{-1}$ and $f^{-1}$ both "restrict" functions to smaller and smaller neighborhoods. The order doesn't matter—we're ultimately restricting functions from neighborhoods of $(g \circ f)(U) = g(f(U))$.

**(b) The identity $g_*(f_*F) = (g \circ f)_*F$.**

For any open set $W \subseteq Z$, we compute:
$$
\begin{aligned}
(g_*(f_*F))(W) &= (f_*F)(g^{-1}(W)) \\
&= F(f^{-1}(g^{-1}(W))) \\
&= F((g \circ f)^{-1}(W)) \\
&= ((g \circ f)_*F)(W).
\end{aligned}
$$

**Intuition:** The pushforward $f_*$ takes sections on $X$ and "views them as sections on $Y$" via the map $f$. Applying $g_*$ then views these as sections on $Z$. This is the same as directly viewing sections on $X$ as sections on $Z$ via $g \circ f$.

# Exercise 2.13

Let $f : X \to Y$ be a continuous map of topological spaces. Let $F$ be a
sheaf on $X$ and $G$ a sheaf on $Y$.
(a) Show that there exist canonical morphisms of sheaves
$$
G \to f_*f^{-1}G,
$$
$$
f^{-1}f_*F \to F.
$$
Moreover, if $f$ is a closed immersion, then the first morphism is surjective. If $f$ is an open immersion, then the second morphism is an isomorphism.
(b) Using the maps of (2.1), show that there exists a canonical bijection
$$
\operatorname{Mor}_Y(G, f_*F) \simeq \operatorname{Mor}_X(f^{-1}G, F).
$$

**Solution.**

**(a) The canonical morphisms.**

**First morphism: $G \to f_*f^{-1}G$.**

For any open $V \subseteq Y$, we need a map $G(V) \to (f_*f^{-1}G)(V) = (f^{-1}G)(f^{-1}(V))$.

By definition of the inverse image:
$$
(f^{-1}G)(f^{-1}(V)) = \varinjlim_{W \supseteq f(f^{-1}(V))} G(W).
$$

Since $f(f^{-1}(V)) \subseteq V$, the set $V$ is one of the neighborhoods over which we take the limit. Thus we have a canonical map
$$
G(V) \hookrightarrow \varinjlim_{W \supseteq f(f^{-1}(V))} G(W) = (f_*f^{-1}G)(V)
$$
coming from the inclusion of the indexing set.

**Intuition:** Sections of $G$ over $V$ can be "viewed as" sections over $f^{-1}(V)$ by restricting to smaller neighborhoods, then pushed forward to $V$.

**Surjectivity when $f$ is a closed immersion:**

If $f$ is a closed immersion, then $f$ is a homeomorphism onto its image $f(X) \subseteq Y$. For any $x \in X$, the stalk map $G_{f(x)} \to (f_*f^{-1}G)_{f(x)}$ can be analyzed at the level of stalks. Since $f$ identifies $X$ with a closed subset of $Y$, the map becomes surjective because every section over neighborhoods of $f(x)$ can be pulled back to a section over neighborhoods of $x$ and then pushed forward.

More concretely, using the adjunction property (part (b)), the map $G \to f_*f^{-1}G$ is the unit of the adjunction. When $f$ is a closed immersion, the counit $f^{-1}f_*F \to F$ being an isomorphism (as $f^{-1}$ is then exact) implies the unit is surjective.

**Second morphism: $f^{-1}f_*F \to F$.**

For any open $U \subseteq X$:
$$
(f^{-1}f_*F)(U) = \varinjlim_{V \supseteq f(U)} (f_*F)(V) = \varinjlim_{V \supseteq f(U)} F(f^{-1}(V)).
$$

Since $U \subseteq f^{-1}(V)$ whenever $V \supseteq f(U)$, we have restriction maps $F(f^{-1}(V)) \to F(U)$. These induce a map on the direct limit:
$$
\varinjlim_{V \supseteq f(U)} F(f^{-1}(V)) \to F(U).
$$

**Intuition:** A section of $f_*F$ over $V$ is a section of $F$ over $f^{-1}(V)$. By taking the direct limit over neighborhoods $V$ of $f(U)$ and restricting to $U$, we get a section over $U$.

**Isomorphism when $f$ is an open immersion:**

If $f$ is an open immersion, then $f : X \to f(X)$ is a homeomorphism and $f(X)$ is open in $Y$. For any open $U \subseteq X$, we can choose $V = f(U)$, which is open in $Y$ and satisfies $f^{-1}(V) = U$. Then the direct limit is achieved by $V = f(U)$ itself, giving:
$$
(f^{-1}f_*F)(U) = F(f^{-1}(f(U))) = F(U).
$$

Thus the canonical map is an isomorphism.

**(b) The adjunction bijection.**

We need to construct a bijection:
$$
\operatorname{Mor}_Y(G, f_*F) \simeq \operatorname{Mor}_X(f^{-1}G, F).
$$

**Construction.** Given $\phi : G \to f_*F$, we define $\tilde{\phi} : f^{-1}G \to F$ as follows. For open $U \subseteq X$:
$$
(f^{-1}G)(U) = \varinjlim_{V \supseteq f(U)} G(V).
$$

The map $\phi_V : G(V) \to (f_*F)(V) = F(f^{-1}(V))$ exists for each $V$. Restricting to $U \subseteq f^{-1}(V)$ and passing to the direct limit gives:
$$
\tilde{\phi}_U : (f^{-1}G)(U) \to F(U).
$$

**Inverse construction.** Given $\psi : f^{-1}G \to F$, define $\bar{\psi} : G \to f_*F$ as follows. For open $V \subseteq Y$:
$$
G(V) \to (f_*f^{-1}G)(V) = (f^{-1}G)(f^{-1}(V)) \xrightarrow{\psi_{f^{-1}(V)}} F(f^{-1}(V)) = (f_*F)(V).
$$

The first map is the canonical morphism from part (a).

**Naturality.** Both constructions are natural in $G$ and $F$, and checking that they are mutual inverses is a straightforward diagram chase using the universal property of direct limits.

**Intuition:** This is the **adjunction** between $f^{-1}$ and $f_*$. The functor $f^{-1}$ is *left adjoint* to $f_*$. In categorical terms:
$$
\operatorname{Hom}(f^{-1}G, F) \cong \operatorname{Hom}(G, f_*F).
$$

This is analogous to the situation in algebra where $-\otimes_A B$ is left adjoint to $\operatorname{Hom}_B(A, -)$, or in topology where the inverse image functor is left adjoint to the direct image functor.

# Condition 3.2

Let us consider the following condition:
$$
\begin{cases}
X \text{ admits a covering by a finite number of affine} \\
\text{open subsets } \{U_i\}_i \text{ such that } U_i \cap U_j \text{ also admits} \\
\text{a finite covering by affine open subsets.}
\end{cases}
\tag{3.2}
$$
Affine schemes always verify this condition, as do Noetherian schemes (Proposition 3.46(a)).

# Proposition 3.12

Let X be a scheme and f ∈OX(X). Then Xf is an open
subset of X. Moreover, if X verifies condition (3.2) above, then the restriction
OX(X) →OX(Xf) induces an isomorphism OX(X)f ≃OX(Xf).

# Definition 3.19

A closed subscheme of $X$ is a closed subset $Z$ of $X$ endowed
with the structure $(Z, \mathcal{O}_Z)$ of a scheme and with a closed immersion $(j, j^\#) :
(Z, \mathcal{O}_Z) \to (X, \mathcal{O}_X)$, where $j : Z \to X$ is the canonical injection.
In general, on a given closed subset $Z$, the structure of a closed subscheme of
$X$ is not unique (see, however, Proposition 4.2). It is therefore necessary always
to specify the scheme structure that we want to put on $Z$.

# Proposition 3.20

Let $X = \operatorname{Spec} A$ be an affine scheme. Let $j : Z \to X$ be a
closed immersion of schemes. Then $Z$ is affine and there exists a unique ideal $J$
of $A$ such that $j$ induces an isomorphism from $Z$ onto $\operatorname{Spec} A/J$.

**Proof.** Let us first show that $Z$ verifies condition (3.2) above. There exist open
subsets $U_p$ of $X$ such that $\{j^{-1}(U_p)\}_p$ is an affine open covering of $Z$. Each $U_p$
is a union of principal open subsets $\{U_{pk}\}_k$ of $X$, and $j^{-1}(U_{pk})$ is affine because
it is a principal open subset of $j^{-1}(U_p)$. By adding principal open sets covering
$X \setminus j(Z)$, we obtain (since $X$ is quasi-compact, see Exercise 1.6) a covering of
$X$ by a finite number of principal open sets $\{V_l\}_l$ such that $j^{-1}(V_l)$ is affine for
every $l$. As $j^{-1}(V_l) \cap j^{-1}(V_{l'})$ is a principal open subset of $j^{-1}(V_l)$, and therefore
affine, we indeed have condition (3.2).

Let $\mathcal{J} = \operatorname{Ker} j^\#$ and $J = \mathcal{J}(X)$. We know that $Z$ is isomorphic to $V(\mathcal{J})$
endowed with the sheaf $\mathcal{O}_X/\mathcal{J}$ (Proposition 2.24). Let $g \in A$. We let $h$ denote
the image of $g$ in $\mathcal{O}_Z(Z)$. From the exact sequence $0 \to \mathcal{J} \to A \to \mathcal{O}_Z(Z)$, we
deduce an exact sequence by $\otimes_A A_g$:
$$
0 \to \mathcal{J} \otimes_A A_g \to A_g = \mathcal{O}_X(D(g)) \to \mathcal{O}_Z(Z)_h.
$$
Now $\mathcal{O}_Z(Z)_h = \mathcal{O}_Z(Z_h) = j_*\mathcal{O}_Z(D(g))$ (Proposition 3.12); therefore we have
$\mathcal{J}(D(g)) = \mathcal{J} \otimes_A A_g$. Let $i : \operatorname{Spec} A/J \to X$ be the closed immersion defined in
the preceding lemma. Then $(\operatorname{Ker} i^\#)(D(g)) = \mathcal{J}(D(g))$ for every principal open
subset $D(g)$ of $X$. It follows that $\operatorname{Ker} i^\# = \mathcal{J}$. Hence $Z \simeq \operatorname{Spec} A/J$. Finally, the
uniqueness of $J$ comes from the fact that if we have an isomorphism $A/J \to A/J'$
which is compatible with the canonical surjections $A \to A/J$ and $A \to A/J'$,
then $J = J'$.

