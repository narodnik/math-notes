# Some topics in commutative algebra

Unless otherwise specified, all rings in this book will be supposed commutative
and with unit.

In this chapter, we introduce some indispensable basic notions of commutative
algebra such as the tensor product, localization, and flatness. Other, more
elaborate notions will be dealt with later, as they are needed. We assume that
the reader is familiar with linear algebra over a commutative ring, and with
Noetherian rings and modules.

## 1.1 Tensor products

In the theory of schemes, the fibered product plays an important role (in particular
the technique of base change). The corresponding notion in commutative
algebra is the tensor product of modules over a ring.

### 1.1.1 Tensor product of modules

**Definition 1.1.** Let $A$ be a commutative ring with unit. Let $M$, $N$ be two
$A$-modules. The tensor product of $M$ and $N$ over $A$ is defined to be an $A$-module
$H$, together with a bilinear map $\phi : M \times N \to H$ satisfying the following universal
property:

For every $A$-module $L$ and every bilinear map $f : M \times N \to L$, there
exists a unique homomorphism of $A$-modules $\tilde{f} : H \to L$ making the
following diagram commutative:

$$
\begin{array}{ccc}
M \times N & \xrightarrow{f} & L \\
\phi \searrow & & \nearrow \tilde{f} \\
& H &
\end{array}
$$

**Proposition 1.2.** Let $A$ be a ring, and let $M$, $N$ be $A$-modules. The tensor
product $(H, \phi)$ exists, and is unique up to isomorphism.

*Proof.* As the solution of a universal problem, the uniqueness is automatic, and
its proof is standard. We give it here as an example. Let $(H, \phi)$ and $(H', \phi')$ be
two solutions. By the universal property, $\phi$ and $\phi'$ factor respectively as $\phi = \tilde{\phi} \circ \phi'$
and $\phi' = \tilde{\phi}' \circ \phi$. It follows that $\phi = (\tilde{\phi} \circ \tilde{\phi}') \circ \phi$. As $\phi = \text{Id} \circ \phi$, it follows from
the uniqueness of the decomposition of $\phi$ that $(\tilde{\phi} \circ \tilde{\phi}') = \text{Id}$. Thus we see that
$\tilde{\phi} : H \to H'$ is an isomorphism.

Let us now show existence. Consider the free $A$-module $A^{(M \times N)}$ with basis
$M \times N$. Let $\{e_{x,y}\}_{(x,y) \in M \times N}$ denote its canonical basis. Let $L$ be the submodule
of $A^{(M \times N)}$ generated by the elements having one of the following forms:

$$
\begin{cases}
e_{x_1 + x_2, y} - e_{x_1, y} - e_{x_2, y} \\
e_{x, y_1 + y_2} - e_{x, y_1} - e_{x, y_2} \\
e_{ax, y} - e_{x, ay}, \; a e_{x, y} - e_{ax, y}, \; a \in A
\end{cases}
$$

Let $H = A^{(M \times N)} / L$, and $\phi : M \times N \to H$ be the map defined by $\phi(x, y) =$
the image of $e_{x,y}$ in $H$. One immediately verifies that the pair $(H, \phi)$ verifies the
universal property mentioned above.

**Notation.** We denote the tensor product of $M$ and $N$ by $(M \otimes_A N, \phi)$. In general,
the map $\phi$ is omitted in the notation. For any $(x, y) \in M \times N$, we let $x \otimes y$ denote
its image by $\phi$. By the bilinearity of $\phi$, we have $a(x \otimes y) = (ax) \otimes y = x \otimes (ay)$
for every $a \in A$.

**Remark 1.3.** By construction, $M \otimes_A N$ is generated as an $A$-module by its
elements of the form $x \otimes y$. Thus every element of $M \otimes_A N$ can be written
(though not in a unique manner) as a finite sum $\sum_i x_i \otimes y_i$, with $x_i \in M$ and
$y_i \in N$. In general, an element of $M \otimes_A N$ cannot be written $x \otimes y$.

**Example 1.4.** Let $A = \mathbb{Z}$, $M = A/2A$, and $N = A/3A$. Then $M \otimes_A N = 0$.
In fact, for every $(x, y) \in M \times N$, we have $x \otimes y = 3(x \otimes y) - 2(x \otimes y) =
x \otimes (3y) - (2x) \otimes y = 0$.

**Proposition 1.5.** Let $A$ be a ring, and let $M$, $N$, $M_i$ be $A$-modules. We have
the following canonical isomorphisms of $A$-modules:

- (a) $M \otimes_A A \simeq M$;
- (b) (commutativity) $M \otimes_A N \simeq N \otimes_A M$;
- (c) (associativity) $(L \otimes_A M) \otimes_A N \simeq L \otimes_A (M \otimes_A N)$;
- (d) (distributivity) $(\bigoplus_{i \in I} M_i) \otimes_A N \simeq \bigoplus_{i \in I} (M_i \otimes_A N)$.

*Proof.* Everything follows from the universal property. Let us, for example,
show (a) and (d).

- (a) Let $\phi : M \times A \to M$ be the bilinear map defined by $(x, a) \mapsto ax$. For any
bilinear map $f : M \times A \to L$, set $\tilde{f} : M \to L$, $x \mapsto f(x, 1)$. Then $f = \tilde{f} \circ \phi$, and
$\tilde{f}$ is the unique linear map $M \to L$ having this property. Hence $(M, \phi)$ is the
tensor product of $M$ and $A$.

- (d) Let $\phi : (\bigoplus_{i \in I} M_i) \times N \to \bigoplus_{i \in I} (M_i \otimes_A N)$ be the map defined by
$$
\phi : \left(\sum_i x_i, y\right) \mapsto \sum_i (x_i \otimes y)
$$

Let $f : (\bigoplus_{i \in I} M_i) \times N \to L$ be a bilinear map. For every $i \in I$, $f$ induces a bilinear
map $f_i : M_i \times N \to L$ which factors through $\bar{f}_i : M_i \otimes_A N \to L$. One verifies
that $f$ factors uniquely as $f = \tilde{f} \circ \psi$, where $\psi : (\bigoplus_{i \in I} M_i) \times N \to (\bigoplus_{i \in I} M_i) \otimes N$
is the canonical map and $\tilde{f} = \bigoplus_i \bar{f}_i$. Hence $\bigoplus_{i \in I} (M_i \otimes_A N)$ is the tensor product
of $(\bigoplus_{i \in I} M_i)$ with $N$.

**Corollary 1.6.** Let $M$ be a free $A$-module with basis $\{e_i\}_{i \in I}$. Then every ele-
ment of $M \otimes_A N$ can be written uniquely as a finite sum $\sum_i e_i \otimes y_i$, with $y_i \in N$.
In particular, if $A$ is a field and $\{e_i\}_{i \in I}$ (resp. $\{d_j\}_{j \in J}$) is a basis of $M$ (resp. of
$N$), then $\{e_i \otimes d_j\}_{(i,j) \in I \times J}$ is a basis of $M \otimes_A N$.

**Remark 1.7.** The associativity of the tensor product allows us to define the
tensor product $M_1 \otimes_A \cdots \otimes_A M_n$ of a finite number of $A$-modules. This tensor
product has a universal property analogous to that of the tensor product of two
modules, with the bilinear maps replaced by multilinear ones.

**Definition 1.8.** Let $u : M \to M'$, $v : N \to N'$ be linear maps of $A$-modules.
By the universal property of the tensor product, there exists a unique $A$-linear
map $u \otimes v : M \otimes_A N \to M' \otimes_A N'$ such that $(u \otimes v)(x \otimes y) = u(x) \otimes v(y)$. In
fact, the map $g : M \times N \to M' \otimes_A N'$ defined by $g(x, y) = u(x) \otimes v(y)$ is clearly
bilinear, and hence factors uniquely as $(u \otimes v) \circ \phi$, where $\phi$ is the canonical map
$M \times N \to M \otimes N$. The map $u \otimes v$ is called the tensor product of $u$ and $v$. The
notation is justified by Exercise 1.2.

Let $\rho : A \to B$ be a ring homomorphism, and $N$ a $B$-module. Then $\rho$ induces,
in a natural way, the structure of an $A$-module on $N$: for any $a \in A$ and $y \in N$,
we set $a \cdot y = \rho(a)y$. We denote this $A$-module by $\rho_* N$, or simply by $N$.

**Definition 1.9.** Let $M$ be an $A$-module. We can endow $M \otimes_A N$ with the
structure of a $B$-module as follows. Let $b \in B$. Let $t_b : N \to N$ denote the
multiplication by $b$, and for any $z \in M \otimes_A N$, set $b \cdot z := (\text{Id}_M \otimes t_b)(z)$. One
easily verifies that this defines the structure of a $B$-module. We denote the $B$-
module $M \otimes_A B$ by $\rho_* M$. This is called the extension of scalars of $M$ by $B$. By
construction, we have $b(x \otimes y) = x \otimes (by)$ for every $b \in B$, $x \in M$, and $y \in N$.

**Proposition 1.10.** Let $\rho : A \to B$ be a ring homomorphism, $M$ an $A$-module,
and let $N$, $P$ be $B$-modules. Then there exists a canonical isomorphism of $B$-
modules
$$
M \otimes_A (N \otimes_B P) \simeq (M \otimes_A N) \otimes_B P
$$

*Proof.* Let us show that there exist $A$-linear maps
$f : M \otimes_A (N \otimes_B P) \to (M \otimes_A N) \otimes_B P$,
$g : (M \otimes_A N) \otimes_B P \to M \otimes_A (N \otimes_B P)$
such that for every $x \in M$, $y \in N$, and $z \in P$, we have $f(x \otimes (y \otimes z)) = (x \otimes y) \otimes z$
and $g((x \otimes y) \otimes z) = x \otimes (y \otimes z)$. This will imply that $f$ is an isomorphism, with
inverse $g$. The $B$-linearity of $f$ follows from this identity.

Let us fix $x \in M$. Let $t_x : N \to M \otimes_A N$ denote the $A$-linear map defined
by $t_x(y) = x \otimes y$. Consider the map $h : M \times (N \otimes_B P) \to (M \otimes_A N) \otimes_B P$
defined by $h(x, u) = (t_x \otimes \text{Id}_P)(u)$. This map is $A$-bilinear, and hence induces an
$A$-linear map $f$ as desired. The construction of $g$ is similar.

Taking $N = B$ in the proposition above, we obtain:

**Corollary 1.11.** Let $\rho : A \to B$ be a ring homomorphism, let $M$ be an $A$-
module, and $N$ a $B$-module. There exists a canonical isomorphism of $B$-modules
$$
(M \otimes_A B) \otimes_B N \simeq M \otimes_A N \quad \text{(simplification by $B$)}
$$

### 1.1.2 Right-exactness of the tensor product

Let us recall that a complex of $A$-modules consists of a (finite or infinite) sequence
of $A$-modules $M_i$, together with linear maps $f_i : M_i \to M_{i+1}$, such that $f_{i+1} \circ f_i =
0$. A complex is written more visually as
$$
\cdots \to M_i \xrightarrow{f_i} M_{i+1} \xrightarrow{f_{i+1}} M_{i+2} \to \cdots
$$

The complex is called exact if $\text{Ker}(f_{i+1}) = \text{Im}(f_i)$ for all $i$. An exact complex is
also called an exact sequence. For example, a sequence
$$
0 \to M \xrightarrow{f} N \quad \text{(resp. } M \xrightarrow{f} N \to 0\text{)}
$$
is exact if and only if $f$ is injective (resp. surjective).

Let $f : N' \to N$ be a linear map of $A$-modules. For simplicity, for any $A$-
module $M$, we denote the linear map $f \otimes \text{Id}_M : N' \otimes_A M \to N \otimes_A M$ by $f_M$.

**Proposition 1.12.** Let $A$ be a ring, and let
$$
N' \xrightarrow{f} N \xrightarrow{g} N'' \to 0
$$
be an exact sequence of $A$-modules. Then for any $A$-module $M$, the sequence
$$
N' \otimes_A M \xrightarrow{f_M} N \otimes_A M \xrightarrow{g_M} N'' \otimes_A M \to 0
$$
is exact.

*Proof.* The surjectivity of $g_M$ follows from that of $g$ (use Remark 1.3). It
remains to show that $\text{Ker}(g_M) = \text{Im } f_M$; in other words, that the canonical
homomorphism $\bar{g} : (N \otimes_A M)/(\text{Im } f_M) \to N'' \otimes_A M$ is an isomorphism. Let
$h : N'' \times M \to (N \otimes_A M)/(\text{Im } f_M)$ be defined by $h(x, z) =$ the image of $y \otimes z$ in
the quotient, where $y \in g^{-1}(x)$. The map $h$ is well defined and moreover bilinear.
It therefore induces a linear map $\bar{h} : N'' \otimes_A M \to (N \otimes_A M)/(\text{Im } f_M)$, and it is
easy to see that this is the inverse of $\bar{g}$.

**Corollary 1.13.** Let $A$ be a ring. Let $N$, $M$ be $A$-modules, and $i : N' \to N$ a
submodule of $N$. There exists a canonical isomorphism
$$
(N \otimes_A M)/(\text{Im } i_M) \simeq (N/N') \otimes_A M
$$
In particular, if $I$ is an ideal of $A$, then we have $M \otimes_A (A/I) \simeq M/(IM)$.

*Proof.* It suffices to apply Proposition 1.12 to the exact sequence $N' \to N \to
(N/N') \to 0$. If $N = A$ and $N' = I$, we also use Proposition 1.5(a).

### 1.1.3 Tensor product of algebras

An $A$-algebra is a commutative ring $B$ with unit, endowed with a ring homomor-
phism $A \to B$. Let $B$ and $C$ be $A$-algebras. We can canonically endow $B \otimes_A C$
with the structure of an $A$-algebra, as follows. Let $g : B \times C \times B \times C \to B \otimes_A C$
be defined by $g(b, c, b', c') = (bb') \otimes (cc')$. This is a multilinear map, and hence
factors through $\bar{g} : B \otimes_A C \otimes_A B \otimes_A C \to B \otimes_A C$ (see Remark 1.7). We can then
define the product on $B \otimes_A C$ using the composition of $(B \otimes_A C) \times (B \otimes_A C) \to
(B \otimes_A C) \otimes (B \otimes_A C)$ with $\bar{g}$. More precisely, we set $(\sum_i b_i \otimes c_i) \cdot (\sum_j b'_j \otimes c'_j) =
\sum_{i,j} (b_i b'_j) \otimes (c_i c'_j)$. The point was to see that this is well defined.

We have homomorphisms of $A$-algebras $p_1 : B \to B \otimes_A C$, $p_2 : C \to B \otimes_A C$
defined by $p_1(b) = b \otimes 1$ and $p_2(c) = 1 \otimes c$. The following proposition can be
verified immediately:

**Proposition 1.14.** Let us keep the notation above. The triplet $(B \otimes_A C, p_1, p_2)$
satisfies the following universal property:

For every $A$-algebra $D$, and for every pair of homomorphisms of
$A$-algebras $q_1 : B \to D$, $q_2 : C \to D$, there exists a unique homo-
morphism of $A$-algebras $q : B \otimes_A C \to D$ such that $q_i = q \circ p_i$.

**Example 1.15.** Let $A[T_1, \ldots, T_n]$ be the polynomial ring in $n$ variables over $A$.
Let $B$ be an $A$-algebra. One easily verifies (either with the universal property
given above or using Proposition 1.5(d)) that the homomorphism of $B$-algebras
$$
A[T_1, \ldots, T_n] \otimes_A B \to B[T_1, \ldots, T_n]
$$
defined by $(\sum_\nu a_\nu T^\nu) \otimes b \mapsto \sum_\nu (b a_\nu T^\nu)$ is an isomorphism. In particular, taking
a polynomial ring for $B$, we obtain
$$
A[T_1, \ldots, T_n] \otimes_A A[S_1, \ldots, S_m] \simeq A[T_1, \ldots, T_n, S_1, \ldots, S_m]
$$

#### Exercises

1.1. Let $\{M_i\}_{i \in I}$, $\{N_j\}_{j \in J}$ be two families of modules over a ring $A$. Show that
$$
(\bigoplus_{i \in I} M_i) \otimes_A (\bigoplus_{j \in J} N_j) \simeq \bigoplus_{(i,j) \in I \times J} (M_i \otimes_A N_j)
$$

1.2. Show that there exists a unique $A$-linear map
$$
f : \text{Hom}_A(M, M') \otimes_A \text{Hom}_A(N, N') \to \text{Hom}_A(M \otimes_A N, M' \otimes_A N')
$$
such that $f(u \otimes v) = u \otimes v$.

1.3. Let $M$, $N$ be $A$-modules, and $i : M' \to M$, $j : N' \to N$ submodules of $M$
and $N$, respectively. Then there exists a canonical isomorphism
$$
(M/M') \otimes_A (N/N') \simeq (M \otimes_A N)/(\text{Im } i_N + \text{Im } j_M)
$$
Show that $(\mathbb{Z}/n\mathbb{Z}) \otimes_{\mathbb{Z}} (\mathbb{Z}/m\mathbb{Z}) = \mathbb{Z}/l\mathbb{Z}$, where $l = \gcd(m, n)$.

1.4. Let $M$, $N$ be $A$-modules, and let $B$, $C$ be $A$-algebras.
- (a) If $M$ and $N$ are finitely generated over $A$, then so is $M \otimes_A N$.
- (b) If $B$ and $C$ are finitely generated over $A$, then so is $B \otimes_A C$.
- (c) Taking $A = \mathbb{Z}$, $M = B = \mathbb{Z}/2\mathbb{Z}$, and $N = C = \mathbb{Q}$, show that the
converse of (a) and (b) is false.

1.5. Let $\rho : A \to B$ be a ring homomorphism, $M$ an $A$-module, and $N$ a
$B$-module. Show that there exists a canonical isomorphism of $A$-modules
$$
\text{Hom}_A(M, \rho_* N) \simeq \text{Hom}_B(\rho_* M, N)
$$

1.6. Let $(N_i)_{i \in I}$ be a direct system of $A$-modules. Then for any $A$-module $M$,
there exists a canonical isomorphism $\varinjlim (N_i \otimes_A M) \simeq (\varinjlim N_i) \otimes_A M$.
(Hint: show that $\varinjlim (N_i \otimes_A M)$ verifies the universal property of the tensor
product $\varinjlim N_i \otimes_A M$.)

1.7. Let $B$ be an $A$-algebra, and let $M$, $N$ be $B$-modules. Show that there exists
a canonical surjective homomorphism $M \otimes_A N \to M \otimes_B N$.

## 1.2 Flatness

The flatness of a module over a ring is a property concerning extensions of
scalars. In algebraic geometry, it assures a certain 'continuity' behavior. In this
section, we study a few elementary aspects of flatness. We conclude the section
with faithful flatness.

### 1.2.1 Left-exactness: flatness

**Definition 2.1.** An $A$-module $M$ is called flat (over $A$) if for every injective
homomorphism of $A$-modules $N \to N'$, $N \otimes_A M \to N' \otimes_A M$ is injective. An
$A$-algebra $B$ is called flat if $B$ is flat over $A$ for its $A$-module structure, and the
canonical homomorphism $A \to B$ will be called a flat homomorphism.

It follows from Proposition 1.12 that if $0 \to N' \to N \to N'' \to 0$ is an exact
sequence of $A$-modules, and $M$ is flat over $A$, then
$$
0 \to N' \otimes_A M \to N \otimes_A M \to N'' \otimes_A M \to 0
$$
is an exact sequence.

**Proposition 2.2.** Let $A$ be a ring. We have the following properties:

- (a) Every free $A$-module is flat.
- (b) (Product) The tensor product of modules that are flat over $A$ is flat
over $A$.
- (c) (Base change) Let $B$ be an $A$-algebra. If $M$ is flat over $A$, then $M \otimes_A B$
is flat over $B$.
- (d) (Transitivity) Let $B$ be a flat $A$-algebra. Then every $B$-module that is
flat over $B$ is flat over $A$.

*Proof.* These easily follow from the definition and the general properties of the
tensor product (Proposition 1.5 and Corollary 1.11).

**Example 2.3.** Let $A = \mathbb{Z}$, $n \geq 2$, and $M = A/nA$. Then $M$ is not flat over $A$.
In fact, if we tensor the canonical injection $nA \to A$ by $M$, the image of $nA \otimes_A M$
in $A \otimes_A M = M$ is equal to $nM = 0$, while $nA \otimes_A M \simeq A \otimes_A M = M \neq 0$.

**Theorem 2.4.** Let $M$ be an $A$-module. Then $M$ is flat if and only if for every
ideal $I$ of $A$, the canonical homomorphism $I \otimes_A M \to IM$ is an isomorphism.

*Proof.* If $M$ is flat over $A$, then for any ideal $I$ of $A$, we can tensor the canonical
injection $I \hookrightarrow A$ by $M$. This shows that $I \otimes_A M \to A \otimes_A M = M$ is injective.
The image of this map is clearly $IM$, whence the isomorphism $I \otimes_A M \simeq IM$.

Conversely, let us suppose that we have this isomorphism for every ideal $I$,
and let us show that $M$ is flat. Let $N' \to N$ be an injective homomorphism of
$A$-modules. We need to show that $N' \otimes M \to N \otimes M$ is injective.

Let us first suppose that $N$ is free of finite rank, and let us show the injectivity
by induction on the rank $n$ of $N$. The case $n = 1$ follows from the hypothesis.
Let us suppose that $n \geq 2$ and that the result holds for every free module of rank
$< n$. The module $N$ is a direct sum of two free submodules $N_1$ and $N_2$, different
from $N$. Let $N_1' = N_1 \cap N'$, and let $N_2'$ be the image of $N'$ in $N_2 = N/N_1$. We
then have the following commutative diagram
$$
\begin{array}{ccccc}
N_1' & \to & N' & \to & N_2' \\
\downarrow & & \downarrow & & \downarrow \\
N_1 & \to & N & \to & N_2
\end{array}
$$
whose horizontal lines are exact, and whose vertical arrows are injective. Tensor-
ing by $M$ gives the commutative diagram
$$
\begin{array}{ccccc}
N_1' \otimes M & \to & N' \otimes M & \to & N_2' \otimes M \\
\beta \downarrow & & \downarrow & & \gamma \downarrow \\
N_1 \otimes M & \xrightarrow{\alpha} & N \otimes M & \to & N_2 \otimes M
\end{array}
$$
whose horizontal lines are still exact (Proposition 1.12). The map $\alpha$ is injective
because $N_1$ is a direct factor of $N$ (Proposition 1.5(d)), and $\beta$, $\gamma$ are injective by
the induction hypothesis applied to the $N_i$. It follows that $N' \otimes M \to N \otimes M$ is
injective.

Let us now suppose $N$ is free of arbitrary rank. Let $N_0$ be a direct factor of
$N$ of finite rank. By the above, the map $(N' \cap N_0) \otimes M \to N_0 \otimes M$ is injective.
Hence so is $(N' \cap N_0) \otimes M \to N \otimes M$, since $N_0$ is a direct factor of $N$. Because
for every $x \in N' \otimes M$ there exists an $N_0$ such that $x$ is contained in the image
of $(N' \cap N_0) \otimes M \to N' \otimes M$ (use Corollary 1.6), we see that $N' \otimes M \to N \otimes M$
is injective.

Let $N$ now be an arbitrary $A$-module. There exist a free $A$-module $L$ and
a surjective homomorphism $p : L \to N$. Let us set $L' = p^{-1}(N')$. We have a
commutative diagram
$$
\begin{array}{cccccc}
\text{Ker}(p) & \to & L' & \to & N' & \to 0 \\
& & \downarrow & & \downarrow & \\
\text{Ker}(p) & \xrightarrow{p} & L & \to & N & \to 0
\end{array}
$$
whose horizontal lines are exact, whence the commutative diagram
$$
\begin{array}{cccccc}
\text{Ker}(p) \otimes M & \to & L' \otimes M & \to & N' \otimes M & \to 0 \\
& & \downarrow & & \downarrow & \\
\text{Ker}(p) \otimes M & \to & L \otimes M & \to & N \otimes M & \to 0
\end{array}
$$
whose horizontal lines are also exact. As the middle vertical arrow is injective,
this shows the injectivity of $N' \otimes M \to N \otimes M$.

Let $A$ be an integral domain and $M$ an $A$-module. An element $x \in M$ is
called a torsion element if there exists a non-zero $a \in A$ such that $ax = 0$. We
call $M$ torsion-free (over $A$) if there is no non-zero torsion element in $M$. When
$A$ is a principal ideal domain, flatness can be expressed in a very simple way.

**Corollary 2.5.** Let $A$ be a principal ideal domain. An $A$-module $M$ is flat if
and only if it is torsion-free over $A$.

*Proof.* Let $I = aA \neq 0$ be an ideal of $A$. Let $t_a$ (resp. $u_a$) denote multiplication
by $a$ in $A$ (resp. in $M$). Then $t_a : A \to I$ is an isomorphism. We have the following
commutative diagram:
$$
\begin{array}{ccc}
M = A \otimes_A M & \xrightarrow{t_a \otimes \text{Id}_M} & I \otimes_A M \\
& \searrow_{u_a} & \downarrow_f \\
& & IM
\end{array}
$$
where $f$ is the canonical homomorphism. Consequently, $f$ is an isomorphism if
and only if $u_a$ is an isomorphism, which is equivalent to saying that $ax = 0$ for
$x \in M$ implies that $x = 0$. Hence the corollary follows from Theorem 2.4.

**Proposition 2.6.** Let $A$ be a ring. Let $0 \to M' \to M \to M'' \to 0$ be an
exact sequence of $A$-modules. Let us suppose that $M''$ is flat. Then the sequence
$0 \to M' \otimes N \to M \otimes N \to M'' \otimes N \to 0$ is also exact for any $A$-module $N$.

*Proof.* It suffices to show the injectivity of $M' \otimes N \to M \otimes N$ (Proposition 1.12).
Let us write $N$ as the quotient of a free $A$-module $L$ by a submodule $K$. We then
have a commutative diagram of exact sequences:
$$
\begin{array}{cccccc}
M' \otimes K & \to & M \otimes K & \to & M'' \otimes K & \\
\downarrow & & \downarrow & & \downarrow_\alpha & \\
0 \to M' \otimes L & \to & M \otimes L & \to & M'' \otimes L & \to 0 \\
& \downarrow_\beta & & \downarrow & & \downarrow \\
& M' \otimes N & \to & M \otimes N & \to & M'' \otimes N
\end{array}
$$
with $\alpha$ injective ($M''$ is flat) and $\beta$ surjective. Some diagram chasing now imme-
diately implies that $M' \otimes N \to M \otimes N$ is injective.

### 1.2.2 Local nature of flatness

Let $A$ be a ring. The intersection of all maximal ideals of $A$ is denoted by $\text{Rad}(A)$.
If $A$ is a local ring, i.e. a ring having only one maximal ideal $\mathfrak{m}$, then $\text{Rad}(A) = \mathfrak{m}$.
The following lemma is very useful:

**Lemma 2.7 (Nakayama's lemma).** Let $A$ be a ring, $I = \text{Rad}(A)$ and $M$ a
finitely generated $A$-module such that $M = IM$. Then $M = 0$.

*Proof.* Let $\{x_1, \ldots, x_n\}$ be a system of generators of $M$. We may suppose $n$
minimal. There exist $\alpha_i \in I$ such that $x_n = \sum_{i < n} \alpha_i x_i$. Hence $(1 - \alpha_n)x_n =
\sum_{i < n} \alpha_i x_i$. As $1 - \alpha_n$ is invertible, and $n$ is assumed to be minimal, it follows
that $n = 1$ and $x_n = 0$.

**Remark 2.8.** Let us note that following Corollary 1.13, the condition $M = IM$
is equivalent to $M \otimes_A A/I = 0$.

**Corollary 2.9.** Let $A$ be a ring, $I = \text{Rad}(A)$, $M$ a finitely generated $A$-module,
and $N$ a submodule of $M$. Suppose that $M \subseteq N + IM$. Then $M = N$.

*Proof.* In fact, $M/N$ is a finitely generated $A$-module, and $(M/N) = I(M/N)$.
Hence $M/N = 0$.

#### Some properties of the localization of modules

Let $A$ be a ring, $S$ a multiplicative subset of $A$ (i.e. a subset of $A$ that is stable
for multiplication, and which contains the unit element of $A$), and $M$ an $A$-
module. We define the localization $S^{-1} M$ of $M$ with respect to $S$ as follows. It
is the set of elements written (formally) $m/s$, with $m \in M$ and $s \in S$, modulo
the equivalence relation $m/s \sim m'/s' \iff$ there exists an $s'' \in S$ such that
$s''(s'm - sm') = 0$. We endow $S^{-1} M$ with the structure of a commutative group
by setting
$$
m/s + m'/s' = (s'm + sm')/(ss')
$$
Note that if $0 \in S$, then $S^{-1} M = 0$. If $M = A$, we define a ring structure on
$S^{-1} A$ by setting
$$
(a/s) \cdot (a'/s') = (aa')/(ss')
$$
The canonical homomorphism $\rho : A \to S^{-1} A$ defined by $\rho(a) = a/1$ makes $S^{-1} A$
into an $A$-algebra. Moreover, the correspondences $I \mapsto I(S^{-1} A)$, $J \mapsto \rho^{-1}(J)$
establish a bijection between those prime ideals of $A$ that are disjoint from $S$
and the prime ideals of $S^{-1} A$. Let $\phi : A \to B$ be a ring homomorphism. Then
$\phi(S) \subseteq B^*$ (invertible elements of $B$) if and only if $\phi$ factors through some
$A$-algebra homomorphism $S^{-1} A \to B$.

For any $A$-module $M$, we have the structure of an $S^{-1} A$-module on $S^{-1} M$
by setting
$$
(a/s) \cdot (m/s') = (am)/(ss')
$$
For $f \in A$, we let $M_f$ denote the localization of $M$ with respect to the multi-
plicative set $\{f^n \mid n \geq 1\} \cup \{1\}$. For a prime ideal $\mathfrak{p}$ of $A$, the localization of $M$
with respect to the multiplicative set $A \setminus \mathfrak{p}$ is denoted $M_{\mathfrak{p}}$.

**Lemma 2.10.** Let $A$ be a ring, $S$ a multiplicative subset of $A$, and $M$ an
$A$-module. There exists a canonical isomorphism of $S^{-1} A$-modules $M \otimes_A S^{-1}
A \simeq S^{-1} M$.

*Proof.* We have a canonical homomorphism of $A$-modules $M \otimes_A S^{-1} A \to S^{-1} M$
defined by $m \otimes (a/s) \mapsto (am)/s$. This is an isomorphism because it has an
inverse given by $m/s \mapsto m \otimes (1/s)$ (this map is well defined). Moreover, this
homomorphism is clearly compatible with the structure of $S^{-1} A$-modules.

**Corollary 2.11.** For any multiplicative subset $S$ of $A$, the canonical homomor-
phism $A \to S^{-1} A$ is flat.

*Proof.* Let $N$ be a sub-$A$-module of $M$. It is clear, by construction, that $S^{-1} N$
is a submodule of $S^{-1} M$. Hence $N \otimes_A S^{-1} A \to M \otimes_A S^{-1} A$ is injective.

**Lemma 2.12.** Let $M$ be an $A$-module. Then $M = 0$ if and only if $M_{\mathfrak{m}} = 0$ for
every maximal ideal $\mathfrak{m}$ of $A$.

*Proof.* Let $x \in M$. Let us consider the ideal $I = \{a \in A \mid ax = 0\}$. If $I \neq A$,
there exists a maximal ideal $\mathfrak{m}$ of $A$ such that $I \subseteq \mathfrak{m}$. As $M_{\mathfrak{m}} = 0$, there exists
an $s \in A \setminus \mathfrak{m}$ such that $sx = 0$. Hence $s \in I$, which contradicts the assumption
that $I \subseteq \mathfrak{m}$. Consequently, $I = A$ and $1 \in I$, and hence $x = 0$.

**Proposition 2.13.** Let $M$ be an $A$-module. The following properties are equi-
valent:

- (i) $M$ is flat over $A$.
- (ii) $M_{\mathfrak{p}}$ is flat over $A_{\mathfrak{p}}$ for every prime ideal $\mathfrak{p}$ of $A$.
- (iii) $M_{\mathfrak{m}}$ is flat over $A_{\mathfrak{m}}$ for every maximal ideal $\mathfrak{m}$ of $A$.

*Proof.* (i) $\Rightarrow$ (ii) follows from Lemma 2.10 and Proposition 2.2(c). As (ii)
trivially implies (iii), it remains to show that (iii) implies (i). Let $N' \to N$ be an
injective homomorphism. Let $L$ denote the kernel of $N' \otimes_A M \to N \otimes_A M$. We
have an exact sequence
$$
0 \to L \to N' \otimes_A M \to N \otimes_A M \tag{2.1}
$$

For any maximal ideal $\mathfrak{m}$ of $A$, we have an exact sequence
$$
0 \to L \otimes_A A_{\mathfrak{m}} \to (N' \otimes_A M) \otimes_A A_{\mathfrak{m}} \to (N \otimes_A M) \otimes_A A_{\mathfrak{m}}
$$
(by virtue of Corollary 2.11). As $(N' \otimes_A M) \otimes_A A_{\mathfrak{m}} = (N'_{\mathfrak{m}}) \otimes_{A_{\mathfrak{m}}} M_{\mathfrak{m}}$, and
$N'_{\mathfrak{m}} \to N_{\mathfrak{m}}$ is injective, we have $L_{\mathfrak{m}} = L \otimes_A A_{\mathfrak{m}} = 0$. It follows by Lemma 2.12
that $L = 0$. Hence $M$ is flat over $A$.

Let us recall that a Dedekind domain is a Noetherian integral domain $A$ whose
localizations $A_{\mathfrak{p}}$ at the prime ideals $\mathfrak{p}$ are principal ideal domains (we will see the
equivalence with the usual definition in Subsection 4.1.1). The following corollary
is an immediate consequence of the proposition above and Corollary 2.5.

**Corollary 2.14.** Let $A$ be a Dedekind domain. An $A$-module is flat if and only
if it is torsion-free over $A$. In particular, every injective ring homomorphism
$A \to B$ with $B$ an integral domain is flat.

**Corollary 2.15.** Let $\rho : A \to B$ be a ring homomorphism. The following prop-
erties are equivalent:

- (i) $A \to B$ is flat.
- (ii) For every prime ideal $\mathfrak{q}$ of $B$, $B_{\mathfrak{q}}$ is flat over $A_{\mathfrak{p}}$, where $\mathfrak{p} = \rho^{-1}(\mathfrak{q})$.
- (iii) For every maximal ideal $\mathfrak{q}$ of $B$, $B_{\mathfrak{q}}$ is flat over $A_{\mathfrak{p}}$.

*Proof.* (i) implies (ii): it is easy to see that $B_{\mathfrak{q}}$ is a localization of (and hence is
flat over) $B \otimes_A A_{\mathfrak{p}}$. Now, the latter is flat over $A_{\mathfrak{p}}$ since $B$ is flat over $A$. Hence
$B_{\mathfrak{q}}$ is flat over $A_{\mathfrak{p}}$ by the transitivity of flatness (Proposition 2.2(d)).

The proof of (iii) $\Rightarrow$ (i) is analogous to that of Proposition 2.13: one can
replace $M$ by $B$ in exact sequence (2.1); then $L$ is a $B$-module, and $L \otimes_B B_{\mathfrak{q}} = 0$
for every maximal ideal $\mathfrak{q}$ of $B$. Hence $L = 0$ and $B$ is flat over $A$.

Let us conclude with the following theorem, which is a partial converse to
Proposition 2.2(a). This converse is false in general, as is shown by the example
$A = \mathbb{Z}_p\mathbb{Z}$ and $M = \text{Frac}(A)$.

**Theorem 2.16.** Let $M$ be a finitely generated flat module over a local ring $A$.
Then $M$ is free over $A$.

*Proof.* Let $\mathfrak{m}$ be the maximal ideal of $A$, and $k = A/\mathfrak{m}$ the residue field of $A$.
Then $M/\mathfrak{m}M = M \otimes_A k$ is a vector space over $k$. Let $\{x_1, \ldots, x_n\}$ be a set of
elements of $M$ whose images in $M/\mathfrak{m}M$ form a free set over $k$. Let us show that
the set is free over $A$. Suppose that $\sum_i a_i x_i = 0$ with $a_i \in A$. Consider the linear
map $f : A^n \to A$ defined by $f(b_1, \ldots, b_n) = \sum_i a_i b_i$. We have an exact sequence
$$
\text{Ker}(f) \to A^n \xrightarrow{f} A
$$
This gives an exact sequence when we tensor by $M$ (here we use the flatness
assumption on $M$):
$$
\text{Ker}(f) \otimes_A M \xrightarrow{f_M} M^n \xrightarrow{f_M} M
$$
where $f_M$ is defined by $f_M(y_1, \ldots, y_n) = \sum_i a_i y_i$. Hence $(x_1, \ldots, x_n) \in \text{Ker}(f) \otimes
M$. There exist $r \in \mathbb{N}$ and elements $b_j = (b_{1j}, \ldots, b_{nj}) \in \text{Ker}(f)$, $y_j \in M$,
$1 \leq j \leq r$, such that $(x_1, \ldots, x_n) = \sum_j b_j \otimes y_j$. At least one of the coordinates
$b_{ij}$ is not an element of $\mathfrak{m}$. We can, for example, suppose that $b_{11} \notin \mathfrak{m}$ (hence it
is invertible). From the equality $\sum_i b_{i1} a_i = 0$, we deduce that
$$
a_1 + a_2 c_2 + \cdots + a_n c_n = 0, \quad \text{where } c_i = b_{i1} b_{11}^{-1}
$$
In particular, if $n = 1$, then $a_1 = 0$. If $n \geq 2$, we have
$$
a_2(x_2 - c_2 x_1) + \cdots + a_n(x_n - c_n x_1) = 0
$$
A reasoning using induction on $n$ shows that $\{x_i\}_i$ is free.

Now let $\{x_1, \ldots, x_n\}$ be a set of elements of $M$ whose images in $M/\mathfrak{m}M$ form
a basis over $k$. Let $N$ be the submodule of $M$ generated by the $x_i$. Then the
canonical homomorphism $N \otimes k \to M \otimes k$ is surjective. Hence $(M/N) \otimes k = 0$.
By Nakayama's lemma, $M/N = 0$. Hence the $x_i$ form a basis of $M$.

### 1.2.3 Faithful flatness

**Proposition 2.17.** Let $M$ be a flat $A$-module. Then the following properties
are equivalent:

- (i) $M \neq \mathfrak{m}M$ for every maximal ideal $\mathfrak{m}$ of $A$.
- (ii) Let $N$ be an $A$-module. If $M \otimes_A N = 0$, then $N = 0$.
- (iii) Let $f : N_1 \to N_2$ be a homomorphism of $A$-modules. If $f_M : N_1 \otimes M \to
N_2 \otimes M$ is an isomorphism, then so is $f$.

*Proof.* (i) implies (ii): it suffices to show that for every finitely generated sub-
module $N_0$ of $N$, we have $N_0 = 0$. As it is, for every submodule $N_0$ of $N$, we have
$N_0 \otimes M \hookrightarrow N \otimes M$, so $N_0 \otimes M = 0$. We may assume that $N$ is itself finitely gen-
erated. Moreover, by virtue of Lemma 2.12, we may assume that $A$ is local with
maximal ideal $\mathfrak{m}$. By tensoring with $k := A/\mathfrak{m}$, we obtain $M/\mathfrak{m}M \otimes_k N/\mathfrak{m}N = 0$.
It follows that $N/\mathfrak{m}N = 0$ (Corollary 1.6). Hence $N = 0$, by Nakayama's lemma.

(ii) implies (iii): we have $\text{Coker}(f_M) = \text{Coker}(f) \otimes M$, and since $M$ is flat,
$\text{Ker}(f_M) = \text{Ker}(f) \otimes M$. Hence if $f_M$ is an isomorphism, then so is $f$.

Finally, (iii) implies (i) since if $M = \mathfrak{m}M$, then the constant map $0 \to A/\mathfrak{m}$
is an isomorphism after tensoring with $M$, so $A/\mathfrak{m} = 0$. This is impossible.

**Definition 2.18.** Let $M$ be a flat module over a ring $A$. We say that $M$ is
faithfully flat over $A$ if it verifies one of the properties of the proposition above.
Let $f : A \to B$ be a ring homomorphism. We say that $B$ is faithfully flat over $A$
if it is faithfully flat as an $A$-module. We will also say that $f$ is faithfully flat.

**Remark 2.19.** One can immediately verify that Proposition 2.2 remains true
when we replace 'flat' by 'faithfully flat' and take only non-zero modules.

**Corollary 2.20.** Let $f : A \to B$ be a flat ring homomorphism. The following
properties are equivalent:

- (i) $f$ is faithfully flat.
- (ii) For every prime ideal $\mathfrak{p}$ of $A$, there exists a prime ideal $\mathfrak{q}$ of $B$ such that
$f^{-1}(\mathfrak{q}) = \mathfrak{p}$.
- (iii) For every maximal ideal $\mathfrak{m}$ of $A$, there exists a maximal ideal $\mathfrak{n}$ of $B$ such
that $f^{-1}(\mathfrak{n}) = \mathfrak{m}$.

*Proof.* Let us show the only non-trivial implication, (i) $\Rightarrow$ (ii). Let us first
note that $f$ is necessarily injective, because $\text{Ker}(f) \otimes_A B \simeq \text{Ker}(f)B = 0$. Since
$A/\mathfrak{p} \to B/\mathfrak{p}B$ is faithfully flat (see Remark 2.19), we may assume that $\mathfrak{p} = 0$, and
that $A$ is an integral domain. Let $\rho : B \to B \otimes_A \text{Frac}(A)$ be the canonical map. Let
$\mathfrak{m}$ be a maximal ideal of $B \otimes_A \text{Frac}(A)$. Then $\mathfrak{q} := \rho^{-1}(\mathfrak{m})$ is a prime ideal of $B$.
Since $\rho \circ f : A \to B \otimes_A \text{Frac}(A)$ factorizes into $A \to \text{Frac}(A) \to B \otimes_A \text{Frac}(A)$, and
the inverse image of $\mathfrak{m}$ in $\text{Frac}(A)$ is zero, we have $f^{-1}(\mathfrak{q}) = (\rho \circ f)^{-1}(\mathfrak{m}) = 0$.

#### Exercises

2.1. Let $M$ be an $A$-module. We call the ideal $\{a \in A \mid aM = 0\}$ of $A$ the
annihilator of $M$, and we denote it by $\text{Ann}(M)$. Let $I \subseteq \text{Ann}(M)$ be an
ideal.
- (a) Show that $M$ is endowed, in a natural way, with the structure of an
$A/I$-module, and that $M \simeq M \otimes_A A/I$.
- (b) Let $N$ be another $A$-module such that $I \subseteq \text{Ann}(N)$. Show that the
canonical homomorphism $M \otimes_A N \to M \otimes_{A/I} N$ is an isomorphism.

2.2. Let $\rho : A \to B$ be a ring homomorphism, $S$ a multiplicative subset of
$A$, and $T = \rho(S)$. Show that $T$ is a multiplicative subset of $B$, and that
$T^{-1} B \simeq B \otimes_A S^{-1} A$ as $A$-algebras.

2.3. Show that Nakayama's lemma is false for modules $M$ that are not finitely
generated.

2.4. Let $I$ be a finitely generated ideal of $A$. Show that the following properties
are equivalent:
- (i) $A/I$ is flat over $A$;
- (ii) $I = I^2$;
- (iii) there exists an $e \in A$ such that $e^2 = e$ and $I = eA$.

2.5. Let $A$ be an integral domain. Show that every $A$-module is flat if and only
if $A$ is a field.

2.6. Let $B$ be a flat $A$-algebra.
- (a) Show that for any finite family $\{I_\lambda\}_{\lambda \in \Lambda}$ of ideals of $A$, we have
$\bigcap_{\lambda \in \Lambda} (I_\lambda B) = (\bigcap_{\lambda \in \Lambda} I_\lambda)B$.
- (b) Let us suppose that $B$ is faithfully flat. Show that $IB \cap A = I$ for
any ideal $I$ of $A$.
- (c) Let $k$ be a field, $A = k[t, s]$, and $C = A[z]/(tz - s)$. By considering
the ideals $tA$ and $sA$, show that $C$ is not flat over $A$.

2.7. Give an example of a finitely generated flat module that is not free (over
a suitable ring $A$).

2.8. Let $A$ be a Noetherian ring, $M$ a finitely generated $A$-module, and $N$
an $A$-module. Let $B$ be a flat $A$-algebra. Let us consider the canonical
homomorphism
$$
\rho : \text{Hom}_A(M, N) \otimes_A B \to \text{Hom}_B(M \otimes_A B, N \otimes_A B)
$$
- (a) Show that $\rho$ is an isomorphism if $M$ is free of finite rank.
- (b) Let $0 \to K \to L \to M \to 0$ be an exact sequence of $A$-modules. Show
that we have a canonical exact sequence
$$
0 \to \text{Hom}_A(M, N) \to \text{Hom}_A(L, N) \to \text{Hom}_A(K, N)
$$
- (c) By taking for $L$ a free module of finite rank, show that $\rho$ is injective.
By applying the injectivity to $K$, show that $\rho$ is an isomorphism.

2.9. Let $A$ be an integral domain, and $K$ its field of fractions. Let $M$ be a
finitely generated sub-$A$-module of $K$. Show that $M$ is flat if and only if
it is locally free of rank 1 (i.e., $M_{\mathfrak{p}}$ is free of rank 1 over $A_{\mathfrak{p}}$ for every
prime ideal $\mathfrak{p}$ of $A$).

2.10. Let $A$ be an integral domain, and $B$ its integral closure in the field of
fractions $\text{Frac}(A)$. Suppose that $B$ is a finitely generated $A$-module. Show
that $B$ is flat over $A$ if and only if $B = A$. One can show that this result
is true without the assumption of finiteness of $B$ over $A$.

2.11. Let $M$ be a flat $A$-module, and let $\rho : A \to B$ be a ring homomorphism.
Show that the following properties are true.
- (a) If $A$ is an integral domain, then $M$ is torsion-free.
- (b) The canonical homomorphism $M \to M \otimes_A B$ is injective if and only
if $\text{Ker}(\rho)$ is contained in $\text{Ann}(M)$.

2.12. Let $B$ be a flat algebra over a Dedekind domain $A$. Let $f \in B$ be such
that for every maximal ideal $\mathfrak{m}$ of $A$, the image of $f$ in $B/\mathfrak{m}B$ is not a
zero divisor. Show that $B/fB$ is still flat over $A$. See also Lemma 4.3.16.

2.13. Let $M$ be a faithfully flat $A$-module. Let $N' \to N \to N''$ be a sequence of
$A$-modules. Show that it is exact if and only if the sequence $N' \otimes M \to
N \otimes M \to N'' \otimes M$ is exact.

2.14. Let $A \to B$ be a ring homomorphism, and let $J$ be an ideal of $B$ such that
$B/J$ is flat over $A$. Show that for any ideal $I$ of $A$, we have $(IB) \cap J = IJ$
(tensor the injection $I \to A$ by $B/J$).

2.15. Let $0 \to M' \to M \to M'' \to 0$ be an exact sequence of modules over a
ring $A$. Let us suppose that $M''$ is flat. Show that $M'$ is flat if and only
if $M$ is flat.

2.16. Let $(A, \mathfrak{m})$ be a Noetherian local ring, and
$$
C^\bullet : 0 \to M' \to M \to M'' \to 0
$$
a complex of finitely generated flat $A$-modules. Show that if there exists
an ideal $I \subseteq \mathfrak{m}$ such that $C^\bullet \otimes_A A/I$ is exact, then $C^\bullet$ is exact.

2.17. Let $M$ be a finitely generated flat $A$-module. Show that it is faithfully
flat if and only if $\text{Ann}(M) = 0$.

2.18. Let $B$ be an $A$-algebra, and let $E$ be a faithfully flat $B$-module. Show
that $E$ is flat over $A$ if and only if $B$ is flat over $A$.

2.19. Let $f : A \to B$ be faithfully flat ring homomorphism.
- (a) Show that $f$ is injective and that $I \to I \otimes_A B$ is injective for every
ideal $I$ of $A$.
- (b) Let $N = \text{Coker}(f)$ be the cokernel of $f$. Let $I$ be an ideal of $A$. Using
the commutative diagram
$$
\begin{array}{cccccc}
I & \to & I \otimes_A B & \to & I \otimes_A N & \to 0 \\
& & \downarrow & & \downarrow & \\
& & IB & \to & IN &
\end{array}
$$
and Exercise 2.6(b), show that $I \otimes_A N \to IN$ is injective, and hence
$N$ is a flat $A$-module.
- (c) Show that for any $A$-module $M$, the canonical map $M \to M \otimes_A B$ is
injective.

## 1.3 Formal completion

### 1.3.1 Inverse limits and completions

Let us first recall some notions and properties of topological groups. An
(Abelian) topological group is an Abelian group $G$ endowed with the structure
of a topological space for which the homomorphism $G \times G \to G$ defined by
$(x, y) \mapsto x - y$ is continuous. Such a structure is entirely determined by giving
a fundamental system $V$ of neighborhoods of $0$ such that every element $V \in V$
contains the difference $V_1 - V_2$ of two elements of $V$.

A (descending) filtration $(G_n)_n$ (i.e., a descending chain of subgroups $(G_n)_n$
of $G$) defines a unique structure of topological group on $G$ for which the $G_n$
form a fundamental system of neighborhoods of $0$. In this section we are essen-
tially interested in topologies of this type. For this topology, $G$ is separated (i.e.,
Hausdorff) if and only if $\bigcap_n G_n = \{0\}$. Two filtrations $(G_n)_n$, $(G'_n)_n$ define the
same topology on $G$ if and only if for every $n$, there exists an $m$ such that
$G'_m \subseteq G_n$, and vice versa.

Let us note that a group homomorphism $f : G \to H$ between two topological
groups is continuous if and only if for every neighborhood $V$ of $0$ in $H$, $f^{-1}(V)$
is a neighborhood of $0$ in $G$.

A (commutative) topological ring is a ring $A$ endowed with a topology for
which the maps $A \times A \to A$ defined by $(x, y) \mapsto x - y$ and $(x, y) \mapsto xy$ are
continuous. A topological $A$-module $M$ is an $A$-module whose additive structure
is a topological group, and for which the map $(a, x) \mapsto ax$ from $A \times M$ to $M$
is continuous. Let $A$ be a commutative ring, and $I$ an ideal. The ideals $I^n$ of
$A$ define a topology on $A$ called the $I$-adic topology. Let $M$ be an $A$-module;
then the filtration $(I^n M)_n$ defines a structure of topological $A$-module, called
the $I$-adic topology on $M$.

Let $G$ be a topological group defined by a filtration $(G_n)_n$. A sequence $(x_m)_m$
of elements of $G$ is called a Cauchy sequence if for every $n$ there exists an $m_0$
such that $x_m - x_{m_0} \in G_n$ for every $m \geq m_0$. The topological group $G$ is complete
if every Cauchy sequence has a limit in $G$. One way to construct complete groups
is to construct inverse limits.

An inverse system (of sets) consists of a collection of sets $(A_n)_{n \geq 0}$ and maps
$\pi_n : A_{n+1} \to A_n$ for every $n$. The inverse limit of the $(A_n)_n$ is the set
$$
\varprojlim A_n := \{(a_n)_n \in \prod_n A_n \mid a_n = \pi_n(a_{n+1}) \text{ for all } n\}
$$
For every $m$, the projection onto the $m$th coordinate defines a canonical map
$$
p_m : \varprojlim A_n \to A_m
$$

Let $B$ be a set, and let $f_n : B \to A_n$ be maps such that $f_n = \pi_n \circ f_{n+1}$ for
every $n$. Then there exists a unique map $f : B \to \varprojlim A_n$ such that $f_m = p_m \circ f$.
This universal property characterizes the inverse limit.

We define inverse limits of groups, of rings, and of modules in the same way,
imposing that the transition maps $\pi_n$ be compatible with the group, ring, or
module structure. The inverse limits are then groups, rings, or modules.

A homomorphism of inverse systems $(A_n)_n \to (B_n)_n$ of Abelian groups con-
sists of homomorphisms $A_n \to B_n$ that are compatible with the projection maps
$A_{n+1} \to A_n$ and $B_{n+1} \to B_n$. This canonically induces a group homomorphism
$\varprojlim A_n \to \varprojlim B_n$. A sequence of homomorphisms
$$
0 \to (A_n)_n \to (B_n)_n \to (C_n)_n \to 0
$$
of inverse systems of Abelian groups is called an exact sequence if $0 \to A_n \to
B_n \to C_n \to 0$ is exact for all $n$.

**Lemma 3.1.** Let $0 \to (A_n)_n \to (B_n)_n \to (C_n)_n \to 0$ be an exact sequence
of inverse systems of Abelian groups. Then $0 \to \varprojlim A_n \to \varprojlim B_n \to \varprojlim C_n$ is
exact. Moreover, the last homomorphism is surjective if there exists an $n_0$ such
that $A_{n+1} \to A_n$ is surjective for every $n \geq n_0$ (see also Exercise 3.15).

*Proof.* Let us check the surjectivity of $\varprojlim B_n \to \varprojlim C_n$; the rest follows imme-
diately from the definition. As the inverse limit of a system does not depend on
its first terms, we may assume that $n_0 = 0$. Let $\pi_n : B_{n+1} \to B_n$ denote the tran-
sition homomorphism. Let $(c_n)_n \in \varprojlim C_n$. Let $b_n \in B_n$ be an arbitrary preimage
of $c_n$. Identifying $A_n$ with a submodule of $B_n$, we have $a_n := \pi_n(b_{n+1}) - b_n \in A_n$.
Hence there exists an $a_{n+1} \in A_{n+1}$ such that $\pi_n(a_{n+1}) = a_n$. It follows that
$\pi_n(b_{n+1} - a_{n+1}) = b_n$. Thus we can modify the $b_n$ one after the other to obtain
$\pi_n(b_{n+1}) = b_n$ for all $n$. Consequently, $(b_n)_n \in \varprojlim B_n$, and its image in $\varprojlim C_n$
is $(c_n)_n$.

Let $G$ be a topological group defined by a filtration $(G_n)_n$. We then have a
natural inverse system $(G/G_n)_n$. Consider $\hat{G} := \varprojlim (G/G_n)$. Let
$$
\hat{G}_n := \{(a_m)_m \in \hat{G} \mid a_m = 0 \text{ for every } m \leq n\}
$$
This defines a filtration $(\hat{G}_n)_n$ on $\hat{G}$ and makes the latter into a topological group.
We have a natural homomorphism $\pi : G \to \hat{G}$ defined by $\pi(g) = (g_n)_n$, where
$g_n$ is the canonical image of $g$ in $G/G_n$. As $\pi^{-1}(\hat{G}_n) = G_n$, $\pi$ is continuous.

Let $G$ be an Abelian topological group. The completion of $G$ is a complete
separated Abelian topological group $K$ together with a continuous homomor-
phism $\phi : G \to K$ such that every continuous homomorphism from $G$ to a
complete separated Abelian topological group factors uniquely through $\phi$. We
will in general omit the term 'separated' and use 'complete' to mean 'separated
and complete'.

**Proposition 3.2.** Let us keep the notation above. Then $\pi : G \to \hat{G}$ is the
completion of $G$. Moreover, $\pi$ induces an isomorphism $G/G_n \simeq \hat{G}/\hat{G}_n$ for every $n$.

*Proof.* It is clear that $\bigcap_n \hat{G}_n = 0$. Hence $\hat{G}$ is separated. Let $(g_m)_m$ be a Cauchy
sequence in $\hat{G}$. For every $r \geq 0$, there exists an $n_r$ such that for every $n \geq n_r$, we
have $g_n - g_{n_r} \in \hat{G}_r$. If we write $g_n = (g_{1n}, \ldots, g_{kn}, \ldots)$, this implies that $g_{in} = g_{in_r}$
for every $i \leq r$ and every $n \geq n_r$. Let $\hat{g} = (g_{1n_1}, g_{2n_2}, \ldots)$. One immediately verifies
that $\hat{g} \in \hat{G}$, and that this is the limit of the sequence $(g_m)_m$. Hence $\hat{G}$ is indeed
complete.

Let $(g_n)_n \in \hat{G}$. If $g \in G$ is a preimage of $g_m$ in $G$, then $\pi(g) - (g_n)_n \in \hat{G}_m$.
Therefore $\pi(G)$ is dense in $\hat{G}$. The isomorphism $G/G_n \simeq \hat{G}/\hat{G}_n$ immediately
follows from the construction.

Let us now show the factoring property. Let $f : G \to H$ be a contin-
uous homomorphism to a complete Abelian topological group. Let $\alpha \in \hat{G}$.
Then there exists a sequence $(\alpha_m)_m$ of elements of $G$ such that $\pi(\alpha_m)$ tends
to $\alpha$. As $\pi^{-1}(\hat{G}_n) = G_n$, this implies that $(\alpha_m)_m$, and therefore $(f(\alpha_m))_m$,
is a Cauchy sequence. Let $\beta$ be the limit of $(f(\alpha_m))_m$. Since $H$ is separated,
$\text{Ker } \pi = \bigcap_{n \geq 0} G_n \subseteq \text{Ker } f$, which implies that $\beta$ does not depend on the choice
of the sequence $(\alpha_m)_m$. We can therefore factor $f$ as $\tilde{f} \circ \pi$ by setting $\tilde{f}(\alpha) = \beta$.
The uniqueness of $\tilde{f}$ comes from the density of $\pi(G)$, and its continuity is easy
to verify.

**Lemma 3.3.** Let $M$, $N$ be Abelian groups endowed respectively with filtrations
$(M_n)_n$, $(N_n)_n$. Let $\phi : M \to N$ be a homomorphism such that for some $n_0 \geq 0$,
we have $N = \phi(M) + N_{n_0}$ and $N_n = \phi(M_n) + N_{n+1}$ for every $n \geq n_0$. Then the
canonical homomorphism $\hat{M} \to \hat{N}$ is surjective.

*Proof.* As explained in the proof of Lemma 3.1, we may assume that $n_0 = 0$.
The hypotheses imply that the canonical homomorphisms $\phi_n : M/M_n \to N/N_n$
and $\text{Ker } \phi_n = \phi^{-1}(N_n)/M_n \to \text{Ker } \phi_{n-1} = \phi^{-1}(N_{n-1})/M_{n-1}$ are surjective.
The surjectivity of $\hat{M} \to \hat{N}$ then results from Lemma 3.1 applied to the exact
sequence of inverse systems $0 \to (\text{Ker } \phi_n)_n \to (M/M_n)_n \to (N/N_n)_n \to 0$.

Let $A$ be a ring endowed with the $I$-adic topology. We denote the completion
of $A$ by $\hat{A}$. We also call $\hat{A}$ the formal completion of $A$ for the $I$-adic topology. As
$A$ is a ring, so is $\hat{A}$. Let $M$ be an $A$-module. Then any submodule filtration $(M_n)_n$
of $M$ defines the structure of a topological $A$-module on $M$. We let $\hat{M}$ denote
the completion of $M$ for the $I$-adic topology (i.e., that defined by the filtration
$(I^n M)$). This is an $\hat{A}$-module.

**Example 3.4.** Let $p$ be a prime number. The completion of $\mathbb{Z}$ for the $p$-adic
topology is denoted $\mathbb{Z}_p$, and is called the ring of $p$-adic integers.

**Definition 3.5.** Let $A$ be a commutative ring with unit. The ring of formal
power series in one variable $A[[T]]$ is defined in the following way. Let $A^{\mathbb{N}}$ be
the group of sequences with coefficients in $A$. To simplify, we denote a sequence
$(a_n)_{n \geq 0}$ by
$$
a_0 + a_1 T + a_2 T^2 + \ldots
$$
We endow $A^{\mathbb{N}}$ with a multiplicative law by setting
$$
\left(\sum_{i \geq 0} a_i T^i\right) \left(\sum_{j \geq 0} b_j T^j\right) = \sum_{k \geq 0} c_k T^k
$$
where $c_k = \sum_{i+j=k} a_i b_j$. This ring clearly contains the polynomial ring $A[T]$.
We define inductively the ring of formal power series
$$
A[[T_1, \ldots, T_r]] = A[[T_1, \ldots, T_{r-1}]][[T_r]]
$$

**Example 3.6.** Let $B = A[T_1, \ldots, T_r]$ be a polynomial ring with coeï¬ƒcients
in a commutative ring $A$. Let $\mathfrak{m}$ be the ideal of $B$ generated by $T_1, T_2, \ldots, T_r$.
Then the $\mathfrak{m}$-adic completion $\hat{B}$ is isomorphic to $A[[T_1, \ldots, T_r]]$, the latter being
endowed with the $\mathfrak{n}$-adic topology for the ideal $\mathfrak{n}$ generated by the $T_i$.

In fact, the following facts are very easy to verify: $A[[T_1, \ldots, T_r]]$ is complete,
and the canonical map $B \to A[[T_1, \ldots, T_r]]$ is continuous and induces an isomor-
phism $B/\mathfrak{m}^n \simeq A[[T_1, \ldots, T_r]]/\mathfrak{n}^n$ for every $n \geq 1$. This implies our assertion.

**Proposition 3.7.** Let $A$ be a Noetherian ring; then the ring of formal power
series $A[[T_1, \ldots, T_r]]$ is also Noetherian.

*Proof.* By induction on $r$, it suffices to show that $A[[T]]$ is Noetherian. Let $I$ be
an ideal of $A[[T]]$. We have to show that $I$ is finitely generated. For each $i \geq 0$,
let $J_i = \{\alpha \in A \mid \alpha T^i \in I + T^{i+1} A[[T]]\}$. This defines an ascending sequence of
ideals of $A$. Hence there exists a $d \geq 0$ such that $J_n = J_d$ for every $n \geq d$. Since
$I/(I \cap T^d A[[T]])$ is a submodule of $A[[T]]/(T^d) = A[T]/(T^d)$ which is finitely
generated over $A$, it is enough to show that $I \cap T^d A[[T]]$ is finitely generated
over $A[[T]]$. Let $f_1, \ldots, f_m$ be generators of $J_d$, and let $F_j \in I$ be such that
$F_j - f_j T^d \in T^{d+1} A[[T]]$. Then $F_j \in I \cap T^d A[[T]]$. We are going to show that
$F_1, \ldots, F_m$ generate $I \cap T^d A[[T]]$. We can suppose that $I \subseteq T^d A[[T]]$.

Let $F = \sum_{i \geq 0} a_i T^i \in I$. Let $q = \min\{i \geq 0 \mid a_i \neq 0\} \geq d$. Then $a_q \in J_q = J_d$.
Hence there exist $b_1, \ldots, b_m \in A$ such that $a_q = \sum_{1 \leq j \leq m} b_j f_j$. It follows that
$$
F - \sum_{1 \leq j \leq m} (b_j T^{q-d}) F_j \in I \cap T^{q+1} A[[T]]
$$
By induction on $n \geq q$, we see that
$F$ can be written as
$$
F = G_q + G_{q+1} + \cdots + G_n + H_n
$$
with $G_i \in T^{i-d}(F_1, \ldots, F_m)$ and $H_n \in I \cap T^{n+1} A[[T]]$. It is clear that the series
$G_q + G_{q+1} + \ldots$ tends to an element of $(F_1, \ldots, F_m)$ and that $H_n$ tends to $0$.
Hence $F \in (F_1, \ldots, F_m)$.

**Corollary 3.8.** Let $A$ be a Noetherian ring, and let $I$ be an ideal of $A$. Then
the formal completion of $A$ for the $I$-adic topology is a Noetherian ring.

*Proof.* Let $t_1, \ldots, t_r$ be a system of generators of $I$. Let us consider the surjective
homomorphism of $A$-algebras $\phi : B = A[T_1, \ldots, T_r] \to A$ defined by $\phi(T_i) =
t_i$, and endow $B$ with the $\mathfrak{m}$-adic topology, where $\mathfrak{m}$ is the ideal generated by
the $T_i$. For any $n \geq 1$, we have $\phi(\mathfrak{m}^n) = I^n$. It follows from Lemma 3.3 that
$A[[T_1, \ldots, T_r]] = \hat{B} \to \hat{A}$ is surjective. Hence $\hat{A}$ is Noetherian by the proposition
above.

Let $M$, $N$ be two $I$-adic $A$-modules. It is clear that the product topology on
$M \oplus N = M \times N$ is also the $I$-adic topology. Consequently, $(M \oplus N)\hat{\ } = \hat{M} \oplus \hat{N}$.
In particular, every isomorphism of $A$-modules $A^r \to L$ canonically induces an
isomorphism of $\hat{A}$-modules $\hat{A}^r \to \hat{L}$. Let $M$ be an $I$-adic $A$-module. There exists
a canonical homomorphism $M \otimes_A \hat{A} \to \hat{M}$. It is in general neither injective nor
surjective. However, we do have the following lemma:

**Lemma 3.9.** Let $M$ be a finitely generated $A$-module. Then $M \otimes_A \hat{A} \to \hat{M}$ is
surjective.

*Proof.* Let $p : L \to M$ be a surjective homomorphism of $A$-modules, with $L$ free
of finite rank. We have $p(I^n L) = I^n M$. It follows from Lemma 3.3 that $\hat{L} \to \hat{M}$
is surjective. It results from the commutative diagram
$$
\begin{array}{ccc}
L \otimes_A \hat{A} & \to & M \otimes_A \hat{A} \\
\downarrow & & \downarrow \\
\hat{L} & \to & \hat{M}
\end{array}
$$
that $M \otimes_A \hat{A} \to \hat{M}$ is surjective.

### 1.3.2 The Artinâ€“Rees lemma and applications

Let us first make a digression towards graded rings and modules. The topological
notions do not intervene at first.

Let $B$ be a commutative ring (with unit). A grading on $B$ consists of a
decomposition of $B$ in subgroups
$$
B = \bigoplus_{d \geq 0} B_d
$$
such that $B_d B_e \subseteq B_{d+e}$. The elements of $B_d$ are called the homogeneous elements
of degree $d$. If $B$ is an algebra over a ring $A$, we also ask that the image of $A$
in $B$ be contained in $B_0$. We then call $B$ a graded algebra over $A$. A polynomial
ring $B = A[T_0, \ldots, T_r]$, for example, is naturally graded by taking for $B_d$ the
sub-$A$-module generated by the monomials of degree $d$.

A graded $B$-module is a $B$-module $E$ which has a decomposition in subgroups
$E = \bigoplus_{d \geq 0} E_d$ such that $B_d E_e \subseteq E_{d+e}$.

Let $A$ be a commutative ring, and $I$ an ideal of $A$. Let $\text{gr}_I A := \bigoplus_{d \geq 0} I^d$ denote the graded
ring. We can also see $\text{gr}_I A$ as the subring $\bigoplus_{d \geq 0} I^d T^d \subseteq A[T]$. Let
us note that if $I$ is finitely generated, then $\text{gr}_I A$ is a finitely generated $A$-algebra;
that is, it is the quotient of a polynomial ring $A[T_1, \ldots, T_r]$ by an ideal. In fact,
let $t_1, \ldots, t_r$ be a system of generators of $I$. Then the map $A[T_1, \ldots, T_r] \to \text{gr}_I A$
defined by $T_i \mapsto t_i \in I^1$ is a surjective ring homomorphism. In particular, if $A$
is Noetherian, then $\text{gr}_I A$ is Noetherian because $A[T]$ is Noetherian.

Let $M$ be an $A$-module. An $I$-filtration of $M$ is a filtration $(M_n)_n$ of $M$ by
submodules $M_n$ such that $IM_n \subseteq M_{n+1}$. We call the filtration stable if there
exists an $n_0$ such that $M_{n+1} = IM_n$ for every $n \geq n_0$.

Let $\widetilde{M} := \bigoplus_{n \geq 0} M_n$. This is a graded $\text{gr}_I A$-module.

**Lemma 3.10.** Let $A$ be a Noetherian ring, $M$ a finitely generated $A$-module,
and $(M_n)_n$ an $I$-filtration on $M$. The following properties are equivalent:

- (i) The filtration $(M_n)_n$ is stable.
- (ii) The module $\widetilde{M}$ is finitely generated over $\text{gr}_I A$.

*Proof.* Let $N_n = \bigoplus_{i \leq n} M_i$. This is a finitely generated $A$-module. Let
$$
P_n = N_n \oplus \left(\bigoplus_{j \geq 1} I^j M_n\right) \subseteq \widetilde{M}
$$
(where $I^j M_n$ is in the component $M_{n+j}$). Then the $P_n$ are finitely generated
$A$-modules, and form an ascending sequence whose union equals all of $\widetilde{M}$. As
$A$ is a Noetherian ring, $\widetilde{M}$ is finitely generated if and only if there exists an
$n_0$ such that $P_{n+1} = P_n$ for every $n \geq n_0$. Now, this equality is equivalent to
$IM_n = M_{n+1}$.

**Proposition 3.11.** Let $A$ be a Noetherian ring, $I$ an ideal of $A$, and $M$ a
finitely generated $A$-module endowed with a stable $I$-filtration $(M_n)_n$. Then for
any submodule $N$ of $M$, the $I$-filtration $(M_n \cap N)_n$ of $N$ is also stable.

*Proof.* In fact, the filtration $(M_n \cap N)_n$ induces on $N$ the structure of a sub-
module of $\widetilde{M}$. The proposition results from Lemma 3.10.

Taking $M_n = I^n M$, we obtain the following corollary:

**Corollary 3.12 (The Artinâ€“Rees lemma).** Let $A$ be a Noetherian ring, $I$ an
ideal of $A$, $M$ a finitely generated $A$-module, and $N$ a submodule of $M$. Then
there exists an $n_0$ such that
$$
(I^{n+1} M) \cap N = I((I^n M) \cap N)
$$
for every $n \geq n_0$.

An immediate application of this result is a theorem of Krull:

**Corollary 3.13.** Let $A$ be a Noetherian ring, $I$ an ideal of $A$, and $M$ a
finitely generated $A$-module. Then $\bigcap_{n \geq 0} (I^n M)$ is the set of elements $x \in M$ for which
there exists an $\alpha \in I$ such that $(1 + \alpha)x = 0$.

*Proof.* If $(1 + \alpha)x = 0$ for an $\alpha \in I$, then $x = -x\alpha \in IM$. We see by induction
that $x \in I^n M$ for every $n$. Conversely, let us suppose that $x \in \bigcap_{n \geq 0} (I^n M)$. Let
us consider the submodule $N := xA$ of $M$. Then by the Artinâ€“Rees lemma, there
exists an integer $n \geq 1$ such that $I^n M \cap N \subseteq IN$, and hence $x \in IN = xI$,
whence the result.

Let us return to topological modules.

**Corollary 3.14.** Let $A$ be a Noetherian ring, $I$ an ideal of $A$, and $M$ a
finitely generated $A$-module. Let $\hat{M}$ be the completion of $M$ for the $I$-adic topology. Then
the canonical homomorphism $M \otimes_A \hat{A} \to \hat{M}$ is an isomorphism. In particular, if
$A$ is complete for the $I$-adic topology, then so is $M$.

*Proof.* Let $0 \to N \to L \to M \to 0$ be an exact sequence of $A$-modules with
$L$ free of finite rank. As the filtrations $(I^n N)_n$, $((I^n L) \cap N)_n$ deï¬ne the same
topology on $N$ by the Artinâ€“Rees lemma, $0 \to \hat{N} \to \hat{L} \to \hat{M} \to 0$ is an exact
sequence (Lemma 3.1). Let us consider the commutative diagram
$$
\begin{array}{cccccc}
N \otimes_A \hat{A} & \to & L \otimes_A \hat{A} & \to & M \otimes_A \hat{A} & \to 0 \\
& \downarrow & & \downarrow & & \downarrow \\
& \hat{N} & \to & \hat{L} & \to & \hat{M} \to 0
\end{array}
$$
whose lines are exact. As the vertical arrows are surjective (Lemma 3.9), the
map $M \otimes_A \hat{A} \to \hat{M}$ is bijective.

**Theorem 3.15.** Let $A$ be a Noetherian ring, and $I$ an ideal of $A$. Then the
completion $\hat{A}$ of $A$ for the $I$-adic topology is a flat ring over $A$.

*Proof.* Let $J$ be an ideal of $A$. By Corollary 3.14, we have $J \otimes_A \hat{A} \simeq \hat{J}$.
Let us consider the canonical homomorphism $\hat{J} \to \hat{A}$. Let us show that it is injective,
which will imply the flatness of $\hat{A}$ over $A$ (Theorem 2.4).

Let $\alpha = (\alpha_n)_n$ be an element of the kernel of $\hat{J} \to \hat{A}$. Let us fix an $n \geq 1$. By
virtue of the Artinâ€“Rees lemma, there exists an $m \geq n$ such that $I^m \cap J \subseteq I^n J$.
Let $\beta_m \in J$ be an element whose image in $J/I^m J$ equals $\alpha_m$; then $\beta_m \in I^n J$.
As $\alpha_n$ is the image of $\beta_m$ in $J/I^n J$, it follows that $\alpha_n = 0$ and therefore $\alpha = 0$.

### 1.3.3 The case of Noetherian local rings

**Theorem 3.16.** Let $(A, \mathfrak{m})$ be a Noetherian local ring, and $\hat{A}$ its $\mathfrak{m}$-adic com-
pletion. We have the following properties:

- (a) For every $n \geq 1$, we have a canonical isomorphism $A/\mathfrak{m}^n \simeq \hat{A}/\mathfrak{m}^n \hat{A}$.
- (b) $\hat{A}$ is a local ring with maximal ideal $\mathfrak{m}\hat{A}$, which is faithfully flat over $A$.
- (c) Let $(B, \mathfrak{n})$ be a local ring such that $A \subseteq B \subseteq \hat{A}$ and $\mathfrak{m}B = \mathfrak{n}$. Then the
$\mathfrak{n}$-adic completion $\hat{B}$ is isomorphic to $\hat{A}$.

*Proof.* (a) The topology on $A/\mathfrak{m}^n$ induced by the $\mathfrak{m}$-adic topology on $A$ is
discrete, giving the exact sequence $0 \to \mathfrak{m}^n \to \hat{A} \to A/\mathfrak{m}^n \to 0$, and moreover
$\mathfrak{m}^n \simeq \mathfrak{m}^n \hat{A}$ (Corollary 3.14 and Theorem 3.15). This proves (a).

(b) Since $\hat{A}/\mathfrak{m}\hat{A} \simeq A/\mathfrak{m}$ is a field, $\mathfrak{m}\hat{A}$ is a maximal ideal. Let $\alpha \in \hat{A}$. We
can write $\alpha = a + \varepsilon$ with $a \in A$ and $\varepsilon \in \mathfrak{m}\hat{A}$. If $\alpha \notin \mathfrak{m}\hat{A}$, then $a \notin
\mathfrak{m}$, and hence
$\alpha = a(1 - \delta)$ with $\delta \in \mathfrak{m}\hat{A}$. It follows that
$$
a^{-1}(1 + \delta + \delta^2 + \ldots)
$$
is the inverse of $\alpha$ in $\hat{A}$. Hence this is a local ring. We already know that it is
flat over $A$, and the faithful flatness follows from Corollary 2.20.

(c) Let $n \geq 1$. We have $\mathfrak{n}^n = \mathfrak{m}^n B$. Since the composition $A/\mathfrak{m}^n \to B/\mathfrak{n}^n B \to
\hat{A}/\mathfrak{m}^n \hat{A}$ is an isomorphism, $B/\mathfrak{n}^n B \to \hat{A}/\mathfrak{m}^n \hat{A}$ is surjective. It remains to show
that it is injective; that is, that $\mathfrak{m}^n \hat{A} \cap B = \mathfrak{n}^n B$. We have $B = A + \mathfrak{m}B =
A + \mathfrak{m}^2 B = \cdots = A + \mathfrak{m}^n B$, so every element $b \in B$ can be written $b = a + \varepsilon$
with $a \in A$, $\varepsilon \in \mathfrak{n}^n B \subseteq \mathfrak{m}^n \hat{A}$. If, moreover, $b \in \mathfrak{m}^n \hat{A}$, then $a \in \mathfrak{m}^n \hat{A} \cap A = \mathfrak{m}^n$,
so $b \in \mathfrak{n}^n B$.

#### Exercises

3.1. Is the usual topology on $\mathbb{R}$ defined by a subgroup filtration?

3.2. Show that $\mathbb{Z}_p$ is a principal local ring, with maximal ideal $p\mathbb{Z}_p$.

3.3. Let $A$ be the ring of germs of real analytic functions in $0 \in \mathbb{R}$. Let $x \in A$
be the identity map on $\mathbb{R}$. Show that the map $f \mapsto \sum_n (f^{(n)}(0)/n!)T^n$
from $A$ to $\mathbb{R}[[T]]$ is injective, and induces an isomorphism from the $xA$-
adic completion of $A$ onto $\mathbb{R}[[T]]$. Show that this is false if we replace $A$
by the $C^\infty$-functions in $0$.

3.4. Find examples where $M \otimes_A \hat{A} \to \hat{M}$ is not surjective, or is not injective.

3.5. Let $B = \bigoplus_{n \geq 0} B_n$ be a graded ring.
- (a) Show that $B_0$ is a subring of $B$, with unit.
- (b) Show that if $B$ is Noetherian, then so is $B_0$, and $B$ is a finitely
generated algebra over $B_0$.

3.6. Let $A$ be an integral domain that is not a field, and let $K$ be its field of
fractions. Show that the conclusion of Proposition 3.11 does not hold if
we take $M = K$, $N = A$, and $I = 0$.

3.7. Let $(A, \mathfrak{m})$ be a Noetherian local ring. Show that $\bigcap_{n \geq 0} \mathfrak{m}^n = 0$. Give a
counter-example with $A$ not Noetherian.

3.8. Let $A$ be a Noetherian ring, and $I$, $J$ ideals of $A$. Let $\hat{A}$ be the $I$-adic
completion of $A$ and $(A/J)\hat{\ }$ the completion of $A/J$ for the $(I + J)/J$-adic
topology. Show that there is a canonical isomorphism $\hat{A}/J\hat{A} \simeq (A/J)\hat{\ }$.

3.9. ($n$th root) Let $n \geq 2$ be an integer. Let $D = \mathbb{Z}[1/n]$.
- (a) Consider the polynomial $S = (1+T)^n - 1 \in D[T]$. Show that $D[[S]] =
D[[T]]$ and that there exists an $f(S) \in SD[[S]]$ such that $1 + S =
(1 + f(S))^n$.
- (b) Let $A$ be a complete ring for the $I$-adic topology, where $I$ is an ideal
of $A$. Suppose that $n$ is invertible in $A$. Let $x \in I$. Show that there
exists a unique continuous homomorphism $\phi : D[[S]] \to A$ such that
$\phi(S) = x$. Conclude that there exists a $y \in I$ such that $1+x = (1+y)^n$.
- (c) Show, by giving an example, that statement (b) is false if $n$ is not
invertible in $A$.

3.10. Let $k$ be a field of characteristic different from $2$, and $A = k[x, y]/(y^2 -
x^2(x + 1))$. Let $\hat{A}$ be the $\mathfrak{m}$-adic completion, where $\mathfrak{m} = (x, y)A$. Show
that $\hat{A} \simeq k[[u, v]]/uv$.

3.11. Let $A$ be a complete ring for the $I$-adic topology, where $I$ is an ideal of $A$.
Let $(M_n)_{n \geq 0}$ be $A$-modules such that $I^{n+1} M_n = 0$ and that there exist
surjective homomorphisms $\pi_n : M_{n+1} \to M_n$ with $\text{Ker}(\pi_n) = I^{n+1} M_{n+1}$.
Let $M = \varprojlim M_n$ and denote the (surjective) canonical homomorphisms
by $u_n : M \to M_n$.
- (a) Fix $d \geq 0$. Show that for any $n \geq d$, there is an exact sequence
$$
0 \to I^{d+1} M_n \to M_n \to M_d \to 0
$$
- (b) Let us suppose that $M_0$ is generated over $A$ by a finite number of
elements $e_{0,1}, \ldots, e_{0,m}$. Let $e_1, \ldots, e_m \in M$ be such that $u_0(e_i) = e_{0,i}$,
and define $\phi_n : A^m \to M_n$ by $(a_1, \ldots, a_m) \mapsto \sum_i a_i u_n(e_i)$. Show that
$\phi_n$ is surjective, and, using Lemma 3.1, that $M$ is generated by the $e_i$.
- (c) Let us moreover suppose that $A$ is Noetherian and that $M_0$ is finitely
generated over $A$. We are going to show that $\text{Ker } u_n = I^{n+1} M$ (in
other words, $u_n$ induces an isomorphism $M/I^{n+1} M \simeq M_n$).
(1) Let $K_n = \text{Ker } u_n$. Show that $K_n = I^{n+1} M + K_{n+1}$.
(2) Show that the canonical homomorphism $\varprojlim M/I^{n+1} M \to
\varprojlim M_n$ is an isomorphism (use Corollary 3.14).
(3) Apply Lemma 3.1 to the exact sequence of inverse systems
$$
0 \to (K_n/I^{n+1} M)_n \to (M/I^{n+1} M)_n \to (M_n)_n \to 0
$$
and show that $K_n = I^{n+1} M$.

3.12. Let $A$ be a Noetherian ring, $I$ an ideal of $A$, and $\hat{A}$ the $I$-adic completion
of $A$. Let $a \in A$. Show that if $a$ is not a zero divisor in $A$, then it is not
a zero divisor in $\hat{A}$. However, show, by giving an example, that $A$ can be
an integral domain without $\hat{A}$ being one.

3.13. Let $A$ be a Noetherian ring, $I$ an ideal of $A$, and $M$ a finitely generated
$A$-module. Suppose that $A$ is complete for the $I$-adic topology. Show that
every submodule of $M$ is closed.

3.14. Let $A$ be a Noetherian ring, $I$ an ideal of $A$, and $\hat{A}$ the formal $I$-adic
completion of $A$. Show that the topology on $\hat{A}$ induced by that on $A$ is
the $I\hat{A}$-adic topology.

3.15. (Mittagâ€“Leffler condition) Let $(A_n, \pi_n)_n$ be an inverse system of sets.
For any pair $m > n$, let us denote the map $\pi_n \circ \pi_{n+1} \circ \cdots \circ \pi_{m-1} :
A_m \to A_n$ by $\pi_{m,n}$. We say that the system $(A_n, \pi_n)_n$ satisfies the Mittagâ€“
Leffler condition if for every $n$, the descending sequence $(\pi_{m,n}(A_m))_{m > n}$
is stationary.
- (a) Let $A'_n = \bigcap_{m > n} \pi_{m,n}(A_m)$. Show that $(A'_n, \pi_{n-1}|_{A'_n})_n$ is an inverse
system and that the canonical map $\varprojlim A'_n \to \varprojlim A_n$ is bijective.
- (b) Let us suppose that $(A_n, \pi_n)_n$ satisfies the Mittagâ€“Leffler condition
and that $A_n \neq \emptyset$ for all $n$. Show that $A'_n \neq \emptyset$, $A'_{n+1} \to A'_n$ is surjec-
tive, and that $\varprojlim A'_n \neq \emptyset$. Deduce from this that $\varprojlim A_n \neq \emptyset$.
- (c) Let $0 \to (A_n)_n \to (B_n)_n \xrightarrow{\rho} (C_n)_n \to 0$ be an exact sequence
of inverse systems of Abelian groups such that $(A_n)_n$ satisfies the
Mittagâ€“Leffler condition. Let $(c_n)_n \in \varprojlim C_n$ and $X_n = \rho^{-1}_n(c_n)$,
where $\rho_n : B_n \to C_n$ is the $n$th component of $\rho$. Show that $(X_n)_n$
is an inverse system of sets satisfying the Mittagâ€“Leffler condition.
Deduce from this that $\varprojlim B_n \to \varprojlim C_n$ is surjective. This gener-
alizes Lemma 3.1.
